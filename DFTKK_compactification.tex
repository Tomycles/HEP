% This is the bit of LaTeX style information that DataCell.cc needs in
% order to write notebooks out in standalone LaTeX form. It is very
% similar to ../frontend/common/preamble.tex; keep them in sync.

\documentclass[10pt]{article}
\usepackage[scale=.8]{geometry}
\usepackage{setspace}
\usepackage{fancyhdr}
\usepackage{listings}
\usepackage[fleqn]{amsmath}
\usepackage{color}
\usepackage{changepage}
\usepackage[colorlinks=true, urlcolor=black, plainpages=false, pdfpagelabels]{hyperref}
\usepackage{etoolbox}
\usepackage{amssymb}
\usepackage[parfill]{parskip}
\usepackage{tableaux}
\def\specialcolon{\mathrel{\mathop{:}}\hspace{-.5em}}
\renewcommand{\bar}[1]{\overline{#1}}
\newcommand{\algorithm}[2]{{\tt\Large\detokenize{#1}}\\[1ex]
{\emph{#2}}\\[1ex]
}
\newcommand{\property}[2]{{\tt\Large\detokenize{#1}}\\[1ex]
{\emph{#2}}\\[1ex]
}
\newcommand{\algo}[1]{{\tt \detokenize{#1}}}
\newcommand{\prop}[1]{{\tt \detokenize{#1}}}
%\makeatletter\def\old@comma{,}\catcode`\,=13 \def,{%
%\ifmmode\old@comma\discretionary{}{}{}\else\old@comma\fi}\makeatother

% Math expressions wrapped in \brwrap will get typeset with
% round brackets around them, which have the appropriate size.
% The expression itself can still be broken over multiple lines.

\newcommand\brwrap[3]{%
  \setbox0=\hbox{$#2$}
  \left#1\vbox to \the\ht0{\hbox to 0pt{}}\right.\kern-.2em
  \begingroup #2\endgroup\kern-.15em
  \left.\vbox to \the\ht0{\hbox to 0pt{}}\right#3
}

\renewcommand{\arraystretch}{1.2}
\tolerance=10000
\relpenalty=10
\binoppenalty=10
\hyphenpenalty=10
\raggedright

\lstnewenvironment{python}[1][]{\lstset{language=python,
   columns=fullflexible,
   xleftmargin=1em,
   belowskip=0pt,
   tabsize=3,
   breaklines=true,   
   basicstyle=\small\ttfamily\color{blue},
   keywordstyle={}
}}{}
  

\everymath{\displaystyle}

% Page numbers
\pagestyle{fancy}
\fancyhf{} % clear all header and footer fields
\renewcommand{\headrulewidth}{0pt}
\renewcommand{\footrulewidth}{0pt}
\fancyfoot[LE,RO]{{\small\thepage}}
\fancyfoot[LO,RE]{{\tiny\href{http://cadabra.science}{{\tt http://cadabra.science}}}}

% \makeatletter\def\old@comma{,}\catcode`\,=13 \def,{%
% \ifmmode\old@comma\discretionary{}{}{}\else\old@comma\fi}\makeatother

% Ensure that maths broken over multiple lines has a bit of spacing
% between lines.
\lineskiplimit=0mm
\lineskip=1.5ex
\begin{document}
Comenzamos definiendo los indices de DFT (M), el espacio externo (mu) y el doble compacto (m)
\begin{python}
{M,N,O,P,Q}::Indices(DFT,position=free)
{\mu,\nu,\rho,\sigma,\lambda,\alpha,\beta,\chi}::Indices(efectivo,position=independent,parent=DFT)
{m,n,o,p,q}::Indices(doble interno,position=free)
\end{python}
Luego definimos la metrica generalizada H, la metrica O(D,D) invariante y los campos que apareceran en la accion de Kaluza-Klein de DFT, g,b,M,phi
\begin{python}
\partial{#}::PartialDerivative.
D_{#}::Derivative.
H_{a? b?}::Symmetric.	
H^{a?}_{b?}::Symmetric.
H_{a?}^{b?}::Symmetric.
H^{a? b?}::Symmetric.
\eta_{M N}::Metric.
\eta^{M N}::InverseMetric.
\eta_{m n}::Metric.
\eta^{m n}::InverseMetric.
b_{\mu \nu}::AntiSymmetric.
g_{\mu \nu}::Metric.
g^{\mu \nu}::InverseMetric.
\delta^{a?}_{b?}::KroneckerDelta.
\delta_{a?}^{b?}::KroneckerDelta.
M_{m n}::Symmetric.
M^{m n}::Symmetric.
Dcov:= D_{\mu}{A??} -> \partial_{\mu}{A??} - A_{\mu}^{p} \partial_{p}{A??};
\end{python}
\begin{adjustwidth}{1em}{0cm}${}D_{\mu}\brwrap{(}{A??}{)} \rightarrow \partial_{\mu}\brwrap{(}{A??}{)}-A_{\mu}\,^{p} \partial_{p}\brwrap{(}{A??}{)}$\\\end{adjustwidth}
D_{\mu}(A??) → \partial_{\mu}(A??)-A_{\mu}^{p}*\partial_{p}(A??)
\begin{python}
{g^{\mu \nu}, g_{\mu \nu}, \phi, \partial_{\mu}{\phi}, \partial_{p}{\phi}, \partial^{p}{\phi}, M^{m n}, M_{m n}, b_{\mu \nu}, \partial_{\mu}{b_{\nu \rho}}, \partial_{p}{b_{\mu \nu}}, \partial^{p}{b_{\mu \nu}}, \partial_{\mu}{ M^{m n}}, \partial_{p}{ M^{m n}}, \partial_{\mu}{ M_{m n}}, \partial_{p}{ M_{m n}}, A_{\mu}^{n}, A_{\mu n}, \partial_{\mu}{A_{\nu}^{n}}, \partial_{p}{A_{\mu}^{n}}, \partial_{\mu}{A_{\nu n}}, \partial_{p}{A_{\mu n}}, \partial_{\mu}{g^{\nu \rho}}, \partial_{p}{g^{\nu \rho}}, \partial_{\mu}{g_{\nu \rho}}, \partial_{p}{g_{\nu \rho}} }::SortOrder;
\end{python}
\begin{adjustwidth}{1em}{0cm}${}\text{Attached property SortOrder to~}\brwrap{[}{g^{\mu \nu},~\discretionary{}{}{} g_{\mu \nu},~\discretionary{}{}{} \phi,~\discretionary{}{}{} \partial_{\mu}{\phi},~\discretionary{}{}{} \partial_{p}{\phi},~\discretionary{}{}{} \partial^{p}{\phi},~\discretionary{}{}{} M^{m n},~\discretionary{}{}{} M_{m n},~\discretionary{}{}{} b_{\mu \nu},~\discretionary{}{}{} \partial_{\mu}{b_{\nu \rho}},~\discretionary{}{}{} \partial_{p}{b_{\mu \nu}},~\discretionary{}{}{} \partial^{p}{b_{\mu \nu}},~\discretionary{}{}{} \partial_{\mu}{M^{m n}},~\discretionary{}{}{} \partial_{p}{M^{m n}},~\discretionary{}{}{} \partial_{\mu}{M_{m n}},~\discretionary{}{}{} \partial_{p}{M_{m n}},~\discretionary{}{}{} A_{\mu}\,^{n},~\discretionary{}{}{} A_{\mu n},~\discretionary{}{}{} \partial_{\mu}{A_{\nu}\,^{n}},~\discretionary{}{}{} \partial_{p}{A_{\mu}\,^{n}},~\discretionary{}{}{} \partial_{\mu}{A_{\nu n}},~\discretionary{}{}{} \partial_{p}{A_{\mu n}},~\discretionary{}{}{} \partial_{\mu}{g^{\nu \rho}},~\discretionary{}{}{} \partial_{p}{g^{\nu \rho}},~\discretionary{}{}{} \partial_{\mu}{g_{\nu \rho}},~\discretionary{}{}{} \partial_{p}{g_{\nu \rho}}}{]}.$\\\end{adjustwidth}
Como ya sabemos a donde esperamos llegar, vamos a desglozar los terminos del lagrangiano final para luego comparar con lo que obtengamos.
R: Escalar de Ricci covariante, con derivadas covariantes en lugar de parciales
\begin{python}
Riemann:= R^{\rho}_{\mu \sigma \nu} ->  D_{\sigma}{ \Gamma^{\rho}_{\mu \nu} } - D_{\nu}{ \Gamma^{\rho}_{\mu \sigma} } + 
\Gamma^{\rho}_{\sigma \alpha} \Gamma^{\alpha}_{\mu \nu} - \Gamma^{\rho}_{\nu \alpha} \Gamma^{\alpha}_{\mu \sigma};

Gamma:= \Gamma^{\rho}_{\mu \nu} -> \frac{1}{2} g^{\rho \alpha} (D_{\mu}{ g_{\alpha \nu} } + D_{\nu}{ g_{\mu \alpha} } -D_{\alpha}{ g_{\mu \nu} }); 

Ricci:= g^{\mu \nu}  R^{\rho}_{\mu \rho \nu};
substitute(_, Riemann)
distribute(_)
substitute(_,Gamma)
converge(Ricci): 
	distribute(_) 
	product_rule(_) 
	canonicalise(_)
sort_product(_,repeat=True)
sort_sum(_)
canonicalise(_)
rename_dummies(_);
\end{python}
\begin{adjustwidth}{1em}{0cm}${}R^{\rho}\,_{\mu \sigma \nu} \rightarrow D_{\sigma}{\Gamma^{\rho}\,_{\mu \nu}}-D_{\nu}{\Gamma^{\rho}\,_{\mu \sigma}}+\Gamma^{\rho}\,_{\sigma \alpha} \Gamma^{\alpha}\,_{\mu \nu}-\Gamma^{\rho}\,_{\nu \alpha} \Gamma^{\alpha}\,_{\mu \sigma}$\\\end{adjustwidth}
R^{\rho}_{\mu \sigma \nu} → D_{\sigma}(\Gamma^{\rho}_{\mu \nu})-D_{\nu}(\Gamma^{\rho}_{\mu \sigma})+\Gamma^{\rho}_{\sigma \alpha}*\Gamma^{\alpha}_{\mu \nu}-\Gamma^{\rho}_{\nu \alpha}*\Gamma^{\alpha}_{\mu \sigma}
\begin{adjustwidth}{1em}{0cm}${}\Gamma^{\rho}\,_{\mu \nu} \rightarrow \frac{1}{2}g^{\rho \alpha} \brwrap{(}{D_{\mu}{g_{\alpha \nu}}+D_{\nu}{g_{\mu \alpha}}-D_{\alpha}{g_{\mu \nu}}}{)}$\\\end{adjustwidth}
\Gamma^{\rho}_{\mu \nu} →  1/2 g^{\rho \alpha}*(D_{\mu}(g_{\alpha \nu})+D_{\nu}(g_{\mu \alpha})-D_{\alpha}(g_{\mu \nu}))
\begin{adjustwidth}{1em}{0cm}${}g^{\mu \nu} R^{\rho}\,_{\mu \rho \nu}$\\\end{adjustwidth}
g^{\mu \nu}*R^{\rho}_{\mu \rho \nu}
\begin{adjustwidth}{1em}{0cm}${} - \frac{1}{2}g^{\mu \nu} D_{\mu}{g^{\rho \sigma}} D_{\nu}{g_{\rho \sigma}} - \frac{1}{2}g^{\rho \sigma} D_{\mu}{g^{\mu \nu}} D_{\nu}{g_{\rho \sigma}}+g^{\nu \rho} D_{\mu}{g^{\mu \sigma}} D_{\nu}{g_{\rho \sigma}}+g^{\mu \rho} g^{\nu \sigma} D_{\mu}{D_{\nu}{g_{\rho \sigma}}}-g^{\mu \nu} g^{\rho \sigma} D_{\mu}{D_{\nu}{g_{\rho \sigma}}}+\frac{1}{2}g^{\mu \rho} g^{\sigma \nu} g^{\lambda \alpha} D_{\mu}{g_{\rho \sigma}} D_{\nu}{g_{\lambda \alpha}} - \frac{1}{4}g^{\mu \nu} g^{\rho \sigma} g^{\lambda \alpha} D_{\mu}{g_{\rho \sigma}} D_{\nu}{g_{\lambda \alpha}} - \frac{1}{2}g^{\mu \rho} g^{\sigma \nu} g^{\lambda \alpha} D_{\mu}{g_{\sigma \lambda}} D_{\nu}{g_{\rho \alpha}}+\frac{1}{4}g^{\mu \nu} g^{\rho \sigma} g^{\lambda \alpha} D_{\mu}{g_{\rho \lambda}} D_{\nu}{g_{\sigma \alpha}}$\\\end{adjustwidth}
 -  1/2 g^{\mu \nu}*D_{\mu}(g^{\rho \sigma})*D_{\nu}(g_{\rho \sigma}) -  1/2 g^{\rho \sigma}*D_{\mu}(g^{\mu \nu})*D_{\nu}(g_{\rho \sigma})+g^{\nu \rho}*D_{\mu}(g^{\mu \sigma})*D_{\nu}(g_{\rho \sigma})+g^{\mu \rho}*g^{\nu \sigma}*D_{\mu}(D_{\nu}(g_{\rho \sigma}))-g^{\mu \nu}*g^{\rho \sigma}*D_{\mu}(D_{\nu}(g_{\rho \sigma}))+ 1/2 g^{\mu \rho}*g^{\sigma \nu}*g^{\lambda \alpha}*D_{\mu}(g_{\rho \sigma})*D_{\nu}(g_{\lambda \alpha}) -  1/4 g^{\mu \nu}*g^{\rho \sigma}*g^{\lambda \alpha}*D_{\mu}(g_{\rho \sigma})*D_{\nu}(g_{\lambda \alpha}) -  1/2 g^{\mu \rho}*g^{\sigma \nu}*g^{\lambda \alpha}*D_{\mu}(g_{\sigma \lambda})*D_{\nu}(g_{\rho \alpha})+ 1/4 g^{\mu \nu}*g^{\rho \sigma}*g^{\lambda \alpha}*D_{\mu}(g_{\rho \lambda})*D_{\nu}(g_{\sigma \alpha})
Pero en lugar de desglozar esto, uno puede reescribirlo de la forma
\begin{python}
R:= - \frac{1}{4}g^{\mu \nu} g^{\rho \sigma} g^{\lambda \alpha} D_{\mu}{g_{\rho \sigma}} D_{\nu}{g_{\lambda \alpha}} 
- g^{\mu \nu} g^{\rho \sigma} D_{\mu}{D_{\nu}{g_{\rho \sigma}}} - D_{\mu}{D_{\nu}{g^{\mu \nu}}}
- g^{\rho \sigma} D_{\mu}{g^{\mu \nu}} D_{\nu}{g_{\rho \sigma}} - \frac{3}{4}g^{\mu \nu} D_{\mu}{g^{\rho \sigma}} D_{\nu}{g_{\rho \sigma}} 
- \frac{1}{2} g^{\mu \nu} D_{\mu}{g^{\rho \sigma}} D_{\rho}{g_{\nu \sigma}};
\end{python}
\begin{adjustwidth}{1em}{0cm}${} - \frac{1}{4}g^{\mu \nu} g^{\rho \sigma} g^{\lambda \alpha} D_{\mu}{g_{\rho \sigma}} D_{\nu}{g_{\lambda \alpha}}-g^{\mu \nu} g^{\rho \sigma} D_{\mu}{D_{\nu}{g_{\rho \sigma}}}-D_{\mu}{D_{\nu}{g^{\mu \nu}}}-g^{\rho \sigma} D_{\mu}{g^{\mu \nu}} D_{\nu}{g_{\rho \sigma}} - \frac{3}{4}g^{\mu \nu} D_{\mu}{g^{\rho \sigma}} D_{\nu}{g_{\rho \sigma}} - \frac{1}{2}g^{\mu \nu} D_{\mu}{g^{\rho \sigma}} D_{\rho}{g_{\nu \sigma}}$\\\end{adjustwidth}
 -  1/4 g^{\mu \nu}*g^{\rho \sigma}*g^{\lambda \alpha}*D_{\mu}(g_{\rho \sigma})*D_{\nu}(g_{\lambda \alpha})-g^{\mu \nu}*g^{\rho \sigma}*D_{\mu}(D_{\nu}(g_{\rho \sigma}))-D_{\mu}(D_{\nu}(g^{\mu \nu}))-g^{\rho \sigma}*D_{\mu}(g^{\mu \nu})*D_{\nu}(g_{\rho \sigma}) -  3/4 g^{\mu \nu}*D_{\mu}(g^{\rho \sigma})*D_{\nu}(g_{\rho \sigma}) -  1/2 g^{\mu \nu}*D_{\mu}(g^{\rho \sigma})*D_{\rho}(g_{\nu \sigma})
Y este si desglozarlo en 3 partes. La manera de distribuir el split se debe a que la compactificacion la realizaremos en 3 partes y los terminos que aparezcan seran justamente
aquellos que decidimos dividir.
\begin{python}
Rtog1:= R1 -> - \frac{1}{4}g^{\mu \nu} g^{\rho \sigma} g^{\lambda \alpha} \partial_{\mu}{g_{\rho \sigma}} \partial_{\nu}{g_{\lambda \alpha}} 
- g^{\mu \nu} g^{\rho \sigma} \partial_{\mu}{\partial_{\nu}{g_{\rho \sigma}}} - \partial_{\mu}{\partial_{\nu}{g^{\mu \nu}}}
- g^{\rho \sigma} \partial_{\mu}{g^{\mu \nu}} \partial_{\nu}{g_{\rho \sigma}};
Rtog2:= R2 -> - \frac{3}{4}g^{\mu \nu} \partial_{\mu}{g^{\rho \sigma}} \partial_{\nu}{g_{\rho \sigma}};
Rtog3:= R3 -> - \frac{1}{2} g^{\mu \nu} \partial_{\mu}{g^{\rho \sigma}} \partial_{\rho}{g_{\nu \sigma}};
\end{python}
\begin{adjustwidth}{1em}{0cm}${}R1 \rightarrow  - \frac{1}{4}g^{\mu \nu} g^{\rho \sigma} g^{\lambda \alpha} \partial_{\mu}{g_{\rho \sigma}} \partial_{\nu}{g_{\lambda \alpha}}-g^{\mu \nu} g^{\rho \sigma} \partial_{\mu \nu}{g_{\rho \sigma}}-\partial_{\mu \nu}{g^{\mu \nu}}-g^{\rho \sigma} \partial_{\mu}{g^{\mu \nu}} \partial_{\nu}{g_{\rho \sigma}}$\\\end{adjustwidth}
R1 →  -  1/4 g^{\mu \nu}*g^{\rho \sigma}*g^{\lambda \alpha}*\partial_{\mu}(g_{\rho \sigma})*\partial_{\nu}(g_{\lambda \alpha})-g^{\mu \nu}*g^{\rho \sigma}*\partial_{\mu \nu}(g_{\rho \sigma})-\partial_{\mu \nu}(g^{\mu \nu})-g^{\rho \sigma}*\partial_{\mu}(g^{\mu \nu})*\partial_{\nu}(g_{\rho \sigma})
 1/8 M^{m n}*\partial_{m}(M^{o p})*\partial_{n}(M_{o p})+ 1/4 M^{m n}*\partial_{m}(g^{\mu \nu})*\partial_{n}(g_{\mu \nu})+ 1/8 g^{\mu \nu}*\partial_{\mu}(M^{m n})*\partial_{\nu}(M_{m n})+ 1/4 g^{\mu \nu}*\partial_{\mu}(g^{\rho \sigma})*\partial_{\nu}(g_{\rho \sigma}) -  1/4 g^{\mu \nu}*A_{\mu}^{m}*\partial_{\nu}(g^{\rho \sigma})*\partial_{m}(g_{\rho \sigma}) -  1/4 g^{\mu \nu}*A_{\mu}^{m}*\partial_{m}(g^{\rho \sigma})*\partial_{\nu}(g_{\rho \sigma}) -  1/4 g^{\mu \nu}*\partial_{\mu}(M^{m n})*\partial^{o}(M_{m n})*A_{\nu o} -  1/4 g^{\alpha \lambda}*g^{\mu \nu}*g^{\rho \sigma}*\partial_{\alpha}(b_{\mu \rho})*\partial_{\lambda}(b_{\nu \sigma})+ 1/4 g^{\mu \nu}*A_{\mu}^{m}*A_{\nu}^{n}*\partial_{m}(g^{\rho \sigma})*\partial_{n}(g_{\rho \sigma}) -  1/2 g^{\mu \nu}*M^{m n}*M^{o p}*\partial_{m}(A_{\mu o})*\partial_{n}(A_{\nu p})+ 1/8 g^{\mu \nu}*\partial^{m}(M^{n o})*\partial^{p}(M_{n o})*A_{\mu m}*A_{\nu p} -  1/2 g^{\mu \nu}*g^{\rho \sigma}*M^{m n}*\partial_{\mu}(A_{\rho m})*\partial_{\nu}(A_{\sigma n}) -  1/4 g^{\mu \nu}*g^{\rho \sigma}*M^{m n}*\partial_{m}(b_{\mu \rho})*\partial_{n}(b_{\nu \sigma})+ 1/2 g^{\alpha \lambda}*g^{\mu \nu}*g^{\rho \sigma}*\partial_{\alpha}(b_{\mu \rho})*A_{\nu}^{m}*\partial_{\lambda}(A_{\sigma m})+ 1/2 g^{\alpha \lambda}*g^{\mu \nu}*g^{\rho \sigma}*\partial_{\alpha}(b_{\mu \rho})*\partial^{m}(b_{\nu \sigma})*A_{\lambda m}+g^{\mu \nu}*g^{\rho \sigma}*M^{m n}*A_{\mu}^{o}*\partial_{\nu}(A_{\rho m})*\partial_{o}(A_{\sigma n})+ 1/2 g^{\mu \nu}*g^{\rho \sigma}*M^{m n}*\partial_{m}(b_{\mu \rho})*A_{\nu}^{o}*\partial_{n}(A_{\sigma o}) -  1/8 g^{\alpha \lambda}*g^{\mu \nu}*g^{\rho \sigma}*A_{\alpha}^{m}*A_{\lambda}^{n}*\partial_{\mu}(A_{\rho m})*\partial_{\nu}(A_{\sigma n})+ 1/8 g^{\alpha \lambda}*g^{\mu \nu}*g^{\rho \sigma}*A_{\alpha}^{m}*A_{\mu}^{n}*\partial_{\rho}(A_{\lambda n})*\partial_{\sigma}(A_{\nu m}) -  1/2 g^{\alpha \lambda}*g^{\mu \nu}*g^{\rho \sigma}*\partial^{m}(b_{\alpha \mu})*A_{\lambda}^{n}*A_{\rho m}*\partial_{\sigma}(A_{\nu n}) -  1/4 g^{\alpha \lambda}*g^{\mu \nu}*g^{\rho \sigma}*\partial^{m}(b_{\alpha \mu})*\partial^{n}(b_{\lambda \nu})*A_{\rho m}*A_{\sigma n} -  1/2 g^{\alpha \lambda}*g^{\mu \nu}*g^{\rho \sigma}*\partial_{\alpha}(b_{\mu \rho})*A_{\lambda}^{m}*A_{\nu}^{n}*\partial_{m}(A_{\sigma n}) -  1/2 g^{\mu \nu}*g^{\rho \sigma}*M^{m n}*A_{\mu}^{o}*A_{\nu}^{p}*\partial_{o}(A_{\rho m})*\partial_{p}(A_{\sigma n}) -  1/8 g^{\mu \nu}*g^{\rho \sigma}*M^{m n}*A_{\mu}^{o}*A_{\nu}^{p}*\partial_{m}(A_{\rho o})*\partial_{n}(A_{\sigma p})+ 1/8 g^{\mu \nu}*g^{\rho \sigma}*M^{m n}*A_{\mu}^{o}*A_{\rho}^{p}*\partial_{m}(A_{\nu p})*\partial_{n}(A_{\sigma o})+ 1/4 g^{\alpha \lambda}*g^{\mu \nu}*g^{\rho \sigma}*A_{\alpha}^{m}*A_{\lambda}^{n}*A_{\mu}^{o}*\partial_{\nu}(A_{\rho m})*\partial_{o}(A_{\sigma n}) -  1/4 g^{\alpha \lambda}*g^{\mu \nu}*g^{\rho \sigma}*A_{\alpha}^{m}*A_{\mu}^{n}*A_{\rho}^{o}*\partial_{\lambda}(A_{\nu o})*\partial_{m}(A_{\sigma n})+ 1/2 g^{\alpha \lambda}*g^{\mu \nu}*g^{\rho \sigma}*\partial^{m}(b_{\alpha \mu})*A_{\lambda}^{n}*A_{\rho m}*A_{\sigma}^{o}*\partial_{o}(A_{\nu n}) -  1/8 g^{\alpha \lambda}*g^{\mu \nu}*g^{\rho \sigma}*A_{\alpha}^{m}*A_{\lambda}^{n}*A_{\mu}^{o}*A_{\nu}^{p}*\partial_{m}(A_{\rho o})*\partial_{n}(A_{\sigma p})+ 1/8 g^{\alpha \lambda}*g^{\mu \nu}*g^{\rho \sigma}*A_{\alpha}^{m}*A_{\lambda}^{n}*A_{\mu}^{o}*A_{\rho}^{p}*\partial_{m}(A_{\nu p})*\partial_{n}(A_{\sigma o})
\begin{adjustwidth}{1em}{0cm}${}R2 \rightarrow  - \frac{3}{4}g^{\mu \nu} \partial_{\mu}{g^{\rho \sigma}} \partial_{\nu}{g_{\rho \sigma}}$\\\end{adjustwidth}
R2 →  -  3/4 g^{\mu \nu}*\partial_{\mu}(g^{\rho \sigma})*\partial_{\nu}(g_{\rho \sigma})
\begin{adjustwidth}{1em}{0cm}${}R3 \rightarrow  - \frac{1}{2}g^{\mu \nu} \partial_{\mu}{g^{\rho \sigma}} \partial_{\rho}{g_{\nu \sigma}}$\\\end{adjustwidth}
R3 →  -  1/2 g^{\mu \nu}*\partial_{\mu}(g^{\rho \sigma})*\partial_{\rho}(g_{\nu \sigma})
 1/4 g^{\mu \nu}*\partial_{\mu}(g^{\rho \sigma})*\partial_{\nu}(g_{\rho \sigma})+g^{\mu \nu}*( -  1/4 A_{\mu}^{m}*\partial_{\nu}(g^{\rho \sigma})*\partial_{m}(g_{\rho \sigma}) -  1/4 A_{\mu}^{m}*\partial_{m}(g^{\rho \sigma})*\partial_{\nu}(g_{\rho \sigma})+ 1/4 A_{\mu}^{m}*A_{\nu}^{n}*\partial_{m}(g^{\rho \sigma})*\partial_{n}(g_{\rho \sigma})) -  1/4 g^{\alpha \lambda}*g^{\mu \nu}*g^{\rho \sigma}*\partial_{\alpha}(b_{\mu \rho})*\partial_{\lambda}(b_{\nu \sigma})+g^{\alpha \lambda}*g^{\mu \nu}*g^{\rho \sigma}*( 1/2 \partial_{\alpha}(b_{\mu \rho})*A_{\nu}^{m}*\partial_{\lambda}(A_{\sigma m})+ 1/2 \partial_{\alpha}(b_{\mu \rho})*\partial^{m}(b_{\nu \sigma})*A_{\lambda m} -  1/8 A_{\alpha}^{m}*A_{\lambda}^{n}*\partial_{\mu}(A_{\rho m})*\partial_{\nu}(A_{\sigma n})+ 1/8 A_{\alpha}^{m}*A_{\mu}^{n}*\partial_{\rho}(A_{\lambda n})*\partial_{\sigma}(A_{\nu m}) -  1/2 \partial^{m}(b_{\alpha \mu})*A_{\lambda}^{n}*A_{\rho m}*\partial_{\sigma}(A_{\nu n}) -  1/4 \partial^{m}(b_{\alpha \mu})*\partial^{n}(b_{\lambda \nu})*A_{\rho m}*A_{\sigma n} -  1/2 \partial_{\alpha}(b_{\mu \rho})*A_{\lambda}^{m}*A_{\nu}^{n}*\partial_{m}(A_{\sigma n})+ 1/4 A_{\alpha}^{m}*A_{\lambda}^{n}*A_{\mu}^{o}*\partial_{\nu}(A_{\rho m})*\partial_{o}(A_{\sigma n}) -  1/4 A_{\alpha}^{m}*A_{\mu}^{n}*A_{\rho}^{o}*\partial_{\lambda}(A_{\nu o})*\partial_{m}(A_{\sigma n})+ 1/2 \partial^{m}(b_{\alpha \mu})*A_{\lambda}^{n}*A_{\rho m}*A_{\sigma}^{o}*\partial_{o}(A_{\nu n}) -  1/8 A_{\alpha}^{m}*A_{\lambda}^{n}*A_{\mu}^{o}*A_{\nu}^{p}*\partial_{m}(A_{\rho o})*\partial_{n}(A_{\sigma p})+ 1/8 A_{\alpha}^{m}*A_{\lambda}^{n}*A_{\mu}^{o}*A_{\rho}^{p}*\partial_{m}(A_{\nu p})*\partial_{n}(A_{\sigma o}))
Con estas sustituciones ahora veremos los terminos con A necesarios para covariantizar el Ricci, parte por parte.
\begin{python}
FallaRicci1:= - \frac{1}{4}g^{\mu \nu} g^{\rho \sigma} g^{\lambda \alpha} D_{\mu}{g_{\rho \sigma}} D_{\nu}{g_{\lambda \alpha}} 
- g^{\mu \nu} g^{\rho \sigma} D_{\mu}{D_{\nu}{g_{\rho \sigma}}} - D_{\mu}{D_{\nu}{g^{\mu \nu}}}
- g^{\rho \sigma} D_{\mu}{g^{\mu \nu}} D_{\nu}{g_{\rho \sigma}} - R1;
substitute(_, Dcov);
substitute(_, Rtog1)
converge(FallaRicci1): 
	distribute(_) 
	product_rule(_)
	sort_product(_) 
	canonicalise(_)
rename_dummies(_)
canonicalise(_);
\end{python}
\begin{adjustwidth}{1em}{0cm}${} - \frac{1}{4}g^{\mu \nu} g^{\rho \sigma} g^{\lambda \alpha} D_{\mu}{g_{\rho \sigma}} D_{\nu}{g_{\lambda \alpha}}-g^{\mu \nu} g^{\rho \sigma} D_{\mu}{D_{\nu}{g_{\rho \sigma}}}-D_{\mu}{D_{\nu}{g^{\mu \nu}}}-g^{\rho \sigma} D_{\mu}{g^{\mu \nu}} D_{\nu}{g_{\rho \sigma}}-R1$\\\end{adjustwidth}
 -  1/4 g^{\mu \nu}*g^{\rho \sigma}*g^{\lambda \alpha}*D_{\mu}(g_{\rho \sigma})*D_{\nu}(g_{\lambda \alpha})-g^{\mu \nu}*g^{\rho \sigma}*D_{\mu}(D_{\nu}(g_{\rho \sigma}))-D_{\mu}(D_{\nu}(g^{\mu \nu}))-g^{\rho \sigma}*D_{\mu}(g^{\mu \nu})*D_{\nu}(g_{\rho \sigma})-R1
\begin{adjustwidth}{1em}{0cm}${} - \frac{1}{4}g^{\mu \nu} g^{\rho \sigma} g^{\lambda \alpha} \brwrap{(}{\partial_{\mu}{g_{\rho \sigma}}-A_{\mu}\,^{p} \partial_{p}{g_{\rho \sigma}}}{)} \brwrap{(}{\partial_{\nu}{g_{\lambda \alpha}}-A_{\nu}\,^{m} \partial_{m}{g_{\lambda \alpha}}}{)}-g^{\mu \nu} g^{\rho \sigma} \brwrap{(}{\partial_{\mu}\brwrap{(}{\partial_{\nu}{g_{\rho \sigma}}-A_{\nu}\,^{p} \partial_{p}{g_{\rho \sigma}}}{)}-A_{\mu}\,^{m} \partial_{m}\brwrap{(}{\partial_{\nu}{g_{\rho \sigma}}-A_{\nu}\,^{p} \partial_{p}{g_{\rho \sigma}}}{)}}{)}-\partial_{\mu}\brwrap{(}{\partial_{\nu}{g^{\mu \nu}}-A_{\nu}\,^{p} \partial_{p}{g^{\mu \nu}}}{)}+A_{\mu}\,^{m} \partial_{m}\brwrap{(}{\partial_{\nu}{g^{\mu \nu}}-A_{\nu}\,^{p} \partial_{p}{g^{\mu \nu}}}{)}-g^{\rho \sigma} \brwrap{(}{\partial_{\mu}{g^{\mu \nu}}-A_{\mu}\,^{p} \partial_{p}{g^{\mu \nu}}}{)} \brwrap{(}{\partial_{\nu}{g_{\rho \sigma}}-A_{\nu}\,^{m} \partial_{m}{g_{\rho \sigma}}}{)}-R1$\\\end{adjustwidth}
 -  1/4 g^{\mu \nu}*g^{\rho \sigma}*g^{\lambda \alpha}*(\partial_{\mu}(g_{\rho \sigma})-A_{\mu}^{p}*\partial_{p}(g_{\rho \sigma}))*(\partial_{\nu}(g_{\lambda \alpha})-A_{\nu}^{m}*\partial_{m}(g_{\lambda \alpha}))-g^{\mu \nu}*g^{\rho \sigma}*(\partial_{\mu}((\partial_{\nu}(g_{\rho \sigma})-A_{\nu}^{p}*\partial_{p}(g_{\rho \sigma})))-A_{\mu}^{m}*\partial_{m}((\partial_{\nu}(g_{\rho \sigma})-A_{\nu}^{p}*\partial_{p}(g_{\rho \sigma}))))-\partial_{\mu}((\partial_{\nu}(g^{\mu \nu})-A_{\nu}^{p}*\partial_{p}(g^{\mu \nu})))+A_{\mu}^{m}*\partial_{m}((\partial_{\nu}(g^{\mu \nu})-A_{\nu}^{p}*\partial_{p}(g^{\mu \nu})))-g^{\rho \sigma}*(\partial_{\mu}(g^{\mu \nu})-A_{\mu}^{p}*\partial_{p}(g^{\mu \nu}))*(\partial_{\nu}(g_{\rho \sigma})-A_{\nu}^{m}*\partial_{m}(g_{\rho \sigma}))-R1
\begin{adjustwidth}{1em}{0cm}${}\frac{1}{2}g^{\alpha \lambda} g^{\mu \nu} g^{\rho \sigma} A_{\alpha}\,^{m} \partial_{\lambda}{g_{\mu \nu}} \partial_{m}{g_{\rho \sigma}} - \frac{1}{4}g^{\alpha \lambda} g^{\mu \nu} g^{\rho \sigma} A_{\alpha}\,^{m} A_{\lambda}\,^{n} \partial_{m}{g_{\mu \nu}} \partial_{n}{g_{\rho \sigma}}+g^{\mu \nu} g^{\rho \sigma} \partial_{\mu}{A_{\nu}\,^{m}} \partial_{m}{g_{\rho \sigma}}+2g^{\mu \nu} g^{\rho \sigma} \partial_{\mu}\,^{m}{g_{\rho \sigma}} A_{\nu m}-g^{\mu \nu} g^{\rho \sigma} A_{\mu}\,^{m} \partial_{m}{A_{\nu}\,^{n}} \partial_{n}{g_{\rho \sigma}}-g^{\mu \nu} g^{\rho \sigma} \partial^{m n}{g_{\mu \nu}} A_{\rho m} A_{\sigma n}+\partial_{\mu}{A_{\nu}\,^{m}} \partial_{m}{g^{\mu \nu}}+2\partial_{\mu}\,^{m}{g^{\mu \nu}} A_{\nu m}-A_{\mu}\,^{m} \partial_{m}{A_{\nu}\,^{n}} \partial_{n}{g^{\mu \nu}}-\partial^{m n}{g^{\mu \nu}} A_{\mu m} A_{\nu n}+g^{\mu \nu} A_{\rho}\,^{m} \partial_{\sigma}{g^{\rho \sigma}} \partial_{m}{g_{\mu \nu}}+g^{\mu \nu} A_{\rho}\,^{m} \partial_{m}{g^{\rho \sigma}} \partial_{\sigma}{g_{\mu \nu}}-g^{\mu \nu} A_{\rho}\,^{m} A_{\sigma}\,^{n} \partial_{m}{g^{\rho \sigma}} \partial_{n}{g_{\mu \nu}}$\\\end{adjustwidth}
 1/2 g^{\alpha \lambda}*g^{\mu \nu}*g^{\rho \sigma}*A_{\alpha}^{m}*\partial_{\lambda}(g_{\mu \nu})*\partial_{m}(g_{\rho \sigma}) -  1/4 g^{\alpha \lambda}*g^{\mu \nu}*g^{\rho \sigma}*A_{\alpha}^{m}*A_{\lambda}^{n}*\partial_{m}(g_{\mu \nu})*\partial_{n}(g_{\rho \sigma})+g^{\mu \nu}*g^{\rho \sigma}*\partial_{\mu}(A_{\nu}^{m})*\partial_{m}(g_{\rho \sigma})+2g^{\mu \nu}*g^{\rho \sigma}*\partial_{\mu}^{m}(g_{\rho \sigma})*A_{\nu m}-g^{\mu \nu}*g^{\rho \sigma}*A_{\mu}^{m}*\partial_{m}(A_{\nu}^{n})*\partial_{n}(g_{\rho \sigma})-g^{\mu \nu}*g^{\rho \sigma}*\partial^{m n}(g_{\mu \nu})*A_{\rho m}*A_{\sigma n}+\partial_{\mu}(A_{\nu}^{m})*\partial_{m}(g^{\mu \nu})+2\partial_{\mu}^{m}(g^{\mu \nu})*A_{\nu m}-A_{\mu}^{m}*\partial_{m}(A_{\nu}^{n})*\partial_{n}(g^{\mu \nu})-\partial^{m n}(g^{\mu \nu})*A_{\mu m}*A_{\nu n}+g^{\mu \nu}*A_{\rho}^{m}*\partial_{\sigma}(g^{\rho \sigma})*\partial_{m}(g_{\mu \nu})+g^{\mu \nu}*A_{\rho}^{m}*\partial_{m}(g^{\rho \sigma})*\partial_{\sigma}(g_{\mu \nu})-g^{\mu \nu}*A_{\rho}^{m}*A_{\sigma}^{n}*\partial_{m}(g^{\rho \sigma})*\partial_{n}(g_{\mu \nu})
\begin{python}
FallaRicci2:= - \frac{3}{4}g^{\mu \nu} D_{\mu}{g^{\rho \sigma}} D_{\nu}{g_{\rho \sigma}} - R2;
substitute(_, Dcov);
substitute(_, Rtog2)
converge(FallaRicci2): 
	distribute(_) 
	product_rule(_)
	sort_product(_) 
	canonicalise(_)
rename_dummies(_)
canonicalise(_);
\end{python}
\begin{adjustwidth}{1em}{0cm}${} - \frac{3}{4}g^{\mu \nu} D_{\mu}{g^{\rho \sigma}} D_{\nu}{g_{\rho \sigma}}-R2$\\\end{adjustwidth}
 -  3/4 g^{\mu \nu}*D_{\mu}(g^{\rho \sigma})*D_{\nu}(g_{\rho \sigma})-R2
\begin{adjustwidth}{1em}{0cm}${} - \frac{3}{4}g^{\mu \nu} \brwrap{(}{\partial_{\mu}{g^{\rho \sigma}}-A_{\mu}\,^{p} \partial_{p}{g^{\rho \sigma}}}{)} \brwrap{(}{\partial_{\nu}{g_{\rho \sigma}}-A_{\nu}\,^{m} \partial_{m}{g_{\rho \sigma}}}{)}-R2$\\\end{adjustwidth}
 -  3/4 g^{\mu \nu}*(\partial_{\mu}(g^{\rho \sigma})-A_{\mu}^{p}*\partial_{p}(g^{\rho \sigma}))*(\partial_{\nu}(g_{\rho \sigma})-A_{\nu}^{m}*\partial_{m}(g_{\rho \sigma}))-R2
\begin{adjustwidth}{1em}{0cm}${}\frac{3}{4}g^{\mu \nu} A_{\mu}\,^{m} \partial_{\nu}{g^{\rho \sigma}} \partial_{m}{g_{\rho \sigma}}+\frac{3}{4}g^{\mu \nu} A_{\mu}\,^{m} \partial_{m}{g^{\rho \sigma}} \partial_{\nu}{g_{\rho \sigma}} - \frac{3}{4}g^{\mu \nu} A_{\mu}\,^{m} A_{\nu}\,^{n} \partial_{m}{g^{\rho \sigma}} \partial_{n}{g_{\rho \sigma}}$\\\end{adjustwidth}
 3/4 g^{\mu \nu}*A_{\mu}^{m}*\partial_{\nu}(g^{\rho \sigma})*\partial_{m}(g_{\rho \sigma})+ 3/4 g^{\mu \nu}*A_{\mu}^{m}*\partial_{m}(g^{\rho \sigma})*\partial_{\nu}(g_{\rho \sigma}) -  3/4 g^{\mu \nu}*A_{\mu}^{m}*A_{\nu}^{n}*\partial_{m}(g^{\rho \sigma})*\partial_{n}(g_{\rho \sigma})
\begin{python}
FallaRicci3:= - \frac{1}{2} g^{\mu \nu} D_{\mu}{g^{\rho \sigma}} D_{\rho}{g_{\nu \sigma}} - R3;
substitute(_, Dcov);
substitute(_, Rtog3)
converge(FallaRicci3): 
	distribute(_) 
	product_rule(_)
	sort_product(_) 
	canonicalise(_)
rename_dummies(_)
canonicalise(_);
\end{python}
\begin{adjustwidth}{1em}{0cm}${} - \frac{1}{2}g^{\mu \nu} D_{\mu}{g^{\rho \sigma}} D_{\rho}{g_{\nu \sigma}}-R3$\\\end{adjustwidth}
 -  1/2 g^{\mu \nu}*D_{\mu}(g^{\rho \sigma})*D_{\rho}(g_{\nu \sigma})-R3
\begin{adjustwidth}{1em}{0cm}${} - \frac{1}{2}g^{\mu \nu} \brwrap{(}{\partial_{\mu}{g^{\rho \sigma}}-A_{\mu}\,^{p} \partial_{p}{g^{\rho \sigma}}}{)} \brwrap{(}{\partial_{\rho}{g_{\nu \sigma}}-A_{\rho}\,^{m} \partial_{m}{g_{\nu \sigma}}}{)}-R3$\\\end{adjustwidth}
 -  1/2 g^{\mu \nu}*(\partial_{\mu}(g^{\rho \sigma})-A_{\mu}^{p}*\partial_{p}(g^{\rho \sigma}))*(\partial_{\rho}(g_{\nu \sigma})-A_{\rho}^{m}*\partial_{m}(g_{\nu \sigma}))-R3
\begin{adjustwidth}{1em}{0cm}${}\frac{1}{2}g^{\mu \nu} A_{\rho}\,^{m} \partial_{\mu}{g^{\rho \sigma}} \partial_{m}{g_{\nu \sigma}}+\frac{1}{2}g^{\mu \nu} A_{\mu}\,^{m} \partial_{m}{g^{\rho \sigma}} \partial_{\rho}{g_{\nu \sigma}} - \frac{1}{2}g^{\mu \nu} A_{\mu}\,^{m} A_{\rho}\,^{n} \partial_{m}{g^{\rho \sigma}} \partial_{n}{g_{\nu \sigma}}$\\\end{adjustwidth}
 1/2 g^{\mu \nu}*A_{\rho}^{m}*\partial_{\mu}(g^{\rho \sigma})*\partial_{m}(g_{\nu \sigma})+ 1/2 g^{\mu \nu}*A_{\mu}^{m}*\partial_{m}(g^{\rho \sigma})*\partial_{\rho}(g_{\nu \sigma}) -  1/2 g^{\mu \nu}*A_{\mu}^{m}*A_{\rho}^{n}*\partial_{m}(g^{\rho \sigma})*\partial_{n}(g_{\nu \sigma})
D(phi)D(phi): Modelo sigma para el dilaton
\begin{python}
sigmadilaton:= -4g^{\mu \nu} (\partial_{\mu}{\phi} - A_{\mu}^{p} \partial_{p}{\phi} + \frac{1}{2} \partial_{p}{A_{\mu}^{p}}) 
(\partial_{\nu}{\phi} - A_{\nu}^{o} \partial_{o}{\phi} + \frac{1}{2} \partial_{o}{A_{\nu}^{o}})
+ 4 \partial_{\mu}{g^{\mu \nu} (\partial_{\nu}{\phi} - A_{\nu}^{p} \partial_{p}{\phi} + \frac{1}{2} \partial_{p}{A_{\nu}^{p}})} 
- 4 A_{\mu}^{o} \partial_{o}{g^{\mu \nu} (\partial_{\nu}{\phi} - A_{\nu}^{p} \partial_{p}{\phi} + \frac{1}{2} \partial_{p}{A_{\nu}^{p}} )}
+ 4 \Gamma^{\mu}_{\mu \rho} g^{\rho \nu} (\partial_{\nu}{\phi} - A_{\nu}^{p} \partial_{p}{\phi} + \frac{1}{2} \partial_{p}{A_{\nu}^{p}});
substitute(_, Gamma)
substitute(_, Dcov)
converge(sigmadilaton): 
	distribute(_) 
	product_rule(_)
	sort_product(_) 
	canonicalise(_)
rename_dummies(_)
canonicalise(_)
sort_sum(_);
\end{python}
\begin{adjustwidth}{1em}{0cm}${}-4g^{\mu \nu} \brwrap{(}{\partial_{\mu}{\phi}-A_{\mu}\,^{p} \partial_{p}{\phi}+\frac{1}{2}\partial_{p}{A_{\mu}\,^{p}}}{)} \brwrap{(}{\partial_{\nu}{\phi}-A_{\nu}\,^{o} \partial_{o}{\phi}+\frac{1}{2}\partial_{o}{A_{\nu}\,^{o}}}{)}+4\partial_{\mu}\brwrap{(}{g^{\mu \nu} \brwrap{(}{\partial_{\nu}{\phi}-A_{\nu}\,^{p} \partial_{p}{\phi}+\frac{1}{2}\partial_{p}{A_{\nu}\,^{p}}}{)}}{)}-4A_{\mu}\,^{o} \partial_{o}\brwrap{(}{g^{\mu \nu} \brwrap{(}{\partial_{\nu}{\phi}-A_{\nu}\,^{p} \partial_{p}{\phi}+\frac{1}{2}\partial_{p}{A_{\nu}\,^{p}}}{)}}{)}+4\Gamma^{\mu}\,_{\mu \rho} g^{\rho \nu} \brwrap{(}{\partial_{\nu}{\phi}-A_{\nu}\,^{p} \partial_{p}{\phi}+\frac{1}{2}\partial_{p}{A_{\nu}\,^{p}}}{)}$\\\end{adjustwidth}
-4g^{\mu \nu}*(\partial_{\mu}(\phi)-A_{\mu}^{p}*\partial_{p}(\phi)+ 1/2 \partial_{p}(A_{\mu}^{p}))*(\partial_{\nu}(\phi)-A_{\nu}^{o}*\partial_{o}(\phi)+ 1/2 \partial_{o}(A_{\nu}^{o}))+4\partial_{\mu}(g^{\mu \nu}*(\partial_{\nu}(\phi)-A_{\nu}^{p}*\partial_{p}(\phi)+ 1/2 \partial_{p}(A_{\nu}^{p})))-4A_{\mu}^{o}*\partial_{o}(g^{\mu \nu}*(\partial_{\nu}(\phi)-A_{\nu}^{p}*\partial_{p}(\phi)+ 1/2 \partial_{p}(A_{\nu}^{p})))+4\Gamma^{\mu}_{\mu \rho}*g^{\rho \nu}*(\partial_{\nu}(\phi)-A_{\nu}^{p}*\partial_{p}(\phi)+ 1/2 \partial_{p}(A_{\nu}^{p}))
\begin{adjustwidth}{1em}{0cm}${}2\partial^{m}{A_{\mu m}} \partial_{\nu}{g^{\mu \nu}}+4\partial_{\mu}{\phi} \partial_{\nu}{g^{\mu \nu}}+2g^{\mu \nu} \partial_{\mu}\,^{m}{A_{\nu m}}+4g^{\mu \nu} \partial_{\mu \nu}{\phi}-2A_{\mu}\,^{m} \partial^{n}{A_{\nu n}} \partial_{m}{g^{\mu \nu}}-4\partial_{\mu}{\phi} A_{\nu}\,^{m} \partial_{m}{g^{\mu \nu}}-4\partial^{m}{\phi} A_{\mu m} \partial_{\nu}{g^{\mu \nu}}-2g^{\mu \nu} A_{\mu}\,^{m} \partial_{m}\,^{n}{A_{\nu n}}-g^{\mu \nu} \partial^{m}{A_{\mu m}} \partial^{n}{A_{\nu n}}-4g^{\mu \nu} \partial_{\mu}{\phi} \partial^{m}{A_{\nu m}}-4g^{\mu \nu} \partial_{\mu}{\phi} \partial_{\nu}{\phi}-4g^{\mu \nu} \partial^{m}{\phi} \partial_{\mu}{A_{\nu m}}-8g^{\mu \nu} \partial_{\mu}\,^{m}{\phi} A_{\nu m}+4\partial^{m}{\phi} A_{\mu m} A_{\nu}\,^{n} \partial_{n}{g^{\mu \nu}}+8g^{\mu \nu} \partial_{\mu}{\phi} \partial^{m}{\phi} A_{\nu m}+4g^{\mu \nu} \partial^{m}{\phi} A_{\mu m} \partial^{n}{A_{\nu n}}+4g^{\mu \nu} \partial^{m}{\phi} A_{\mu}\,^{n} \partial_{n}{A_{\nu m}}+4g^{\mu \nu} \partial^{m n}{\phi} A_{\mu m} A_{\nu n}+g^{\mu \nu} g^{\rho \sigma} \partial^{m}{A_{\mu m}} \partial_{\nu}{g_{\rho \sigma}}%
+2g^{\mu \nu} g^{\rho \sigma} \partial_{\mu}{\phi} \partial_{\nu}{g_{\rho \sigma}}-4g^{\mu \nu} \partial^{m}{\phi} \partial^{n}{\phi} A_{\mu m} A_{\nu n}-g^{\mu \nu} g^{\rho \sigma} A_{\mu}\,^{m} \partial^{n}{A_{\nu n}} \partial_{m}{g_{\rho \sigma}}-2g^{\mu \nu} g^{\rho \sigma} \partial_{\mu}{\phi} A_{\nu}\,^{m} \partial_{m}{g_{\rho \sigma}}-2g^{\mu \nu} g^{\rho \sigma} \partial^{m}{\phi} A_{\mu m} \partial_{\nu}{g_{\rho \sigma}}+2g^{\mu \nu} g^{\rho \sigma} \partial^{m}{\phi} A_{\mu m} A_{\nu}\,^{n} \partial_{n}{g_{\rho \sigma}}$\\\end{adjustwidth}
2\partial^{m}(A_{\mu m})*\partial_{\nu}(g^{\mu \nu})+4\partial_{\mu}(\phi)*\partial_{\nu}(g^{\mu \nu})+2g^{\mu \nu}*\partial_{\mu}^{m}(A_{\nu m})+4g^{\mu \nu}*\partial_{\mu \nu}(\phi)-2A_{\mu}^{m}*\partial^{n}(A_{\nu n})*\partial_{m}(g^{\mu \nu})-4\partial_{\mu}(\phi)*A_{\nu}^{m}*\partial_{m}(g^{\mu \nu})-4\partial^{m}(\phi)*A_{\mu m}*\partial_{\nu}(g^{\mu \nu})-2g^{\mu \nu}*A_{\mu}^{m}*\partial_{m}^{n}(A_{\nu n})-g^{\mu \nu}*\partial^{m}(A_{\mu m})*\partial^{n}(A_{\nu n})-4g^{\mu \nu}*\partial_{\mu}(\phi)*\partial^{m}(A_{\nu m})-4g^{\mu \nu}*\partial_{\mu}(\phi)*\partial_{\nu}(\phi)-4g^{\mu \nu}*\partial^{m}(\phi)*\partial_{\mu}(A_{\nu m})-8g^{\mu \nu}*\partial_{\mu}^{m}(\phi)*A_{\nu m}+4\partial^{m}(\phi)*A_{\mu m}*A_{\nu}^{n}*\partial_{n}(g^{\mu \nu})+8g^{\mu \nu}*\partial_{\mu}(\phi)*\partial^{m}(\phi)*A_{\nu m}+4g^{\mu \nu}*\partial^{m}(\phi)*A_{\mu m}*\partial^{n}(A_{\nu n})+4g^{\mu \nu}*\partial^{m}(\phi)*A_{\mu}^{n}*\partial_{n}(A_{\nu m})+4g^{\mu \nu}*\partial^{m n}(\phi)*A_{\mu m}*A_{\nu n}+g^{\mu \nu}*g^{\rho \sigma}*\partial^{m}(A_{\mu m})*\partial_{\nu}(g_{\rho \sigma})+2g^{\mu \nu}*g^{\rho \sigma}*\partial_{\mu}(\phi)*\partial_{\nu}(g_{\rho \sigma})-4g^{\mu \nu}*\partial^{m}(\phi)*\partial^{n}(\phi)*A_{\mu m}*A_{\nu n}-g^{\mu \nu}*g^{\rho \sigma}*A_{\mu}^{m}*\partial^{n}(A_{\nu n})*\partial_{m}(g_{\rho \sigma})-2g^{\mu \nu}*g^{\rho \sigma}*\partial_{\mu}(\phi)*A_{\nu}^{m}*\partial_{m}(g_{\rho \sigma})-2g^{\mu \nu}*g^{\rho \sigma}*\partial^{m}(\phi)*A_{\mu m}*\partial_{\nu}(g_{\rho \sigma})+2g^{\mu \nu}*g^{\rho \sigma}*\partial^{m}(\phi)*A_{\mu m}*A_{\nu}^{n}*\partial_{n}(g_{\rho \sigma})
DMDM: Modelo sigma para la matriz escalar
\begin{python}
sigmaM:= \frac{1}{8}g^{\mu \nu} (\partial_{\mu}{M^{m n}} - A_{\mu}^{p} \partial_{p}{M^{m n}} - (\partial^{m}{A_{\mu p}} - \partial_{p}{A_{\mu}^{m}}) M^{p n} - (\partial^{n}{A_{\mu p}} - \partial_{p}{A_{\mu}^{n}}) M^{m p}) (\partial_{\nu}{M_{m n}} - A_{\nu}^{o} \partial_{o}{M_{m n}} - (\partial_{m}{A_{\nu}^{o}} - \partial^{o}{A_{\nu m}}) M_{o n} - (\partial_{n}{A_{\nu}^{o}} - \partial^{o}{A_{\nu n}}) M_{m o});
distribute(_)
sort_product(_)
rename_dummies(_)
canonicalise(_)
sort_product(_)
sort_sum(_)
canonicalise(_)
factor_out(_,$g^{\mu \nu}$);
\end{python}
\begin{adjustwidth}{1em}{0cm}${}\frac{1}{8}g^{\mu \nu} \brwrap{(}{\partial_{\mu}{M^{m n}}-A_{\mu}\,^{p} \partial_{p}{M^{m n}}-\brwrap{(}{\partial^{m}{A_{\mu p}}-\partial_{p}{A_{\mu}\,^{m}}}{)} M^{p n}-\brwrap{(}{\partial^{n}{A_{\mu p}}-\partial_{p}{A_{\mu}\,^{n}}}{)} M^{m p}}{)} \brwrap{(}{\partial_{\nu}{M_{m n}}-A_{\nu}\,^{o} \partial_{o}{M_{m n}}-\brwrap{(}{\partial_{m}{A_{\nu}\,^{o}}-\partial^{o}{A_{\nu m}}}{)} M_{o n}-\brwrap{(}{\partial_{n}{A_{\nu}\,^{o}}-\partial^{o}{A_{\nu n}}}{)} M_{m o}}{)}$\\\end{adjustwidth}
 1/8 g^{\mu \nu}*(\partial_{\mu}(M^{m n})-A_{\mu}^{p}*\partial_{p}(M^{m n})-(\partial^{m}(A_{\mu p})-\partial_{p}(A_{\mu}^{m}))*M^{p n}-(\partial^{n}(A_{\mu p})-\partial_{p}(A_{\mu}^{n}))*M^{m p})*(\partial_{\nu}(M_{m n})-A_{\nu}^{o}*\partial_{o}(M_{m n})-(\partial_{m}(A_{\nu}^{o})-\partial^{o}(A_{\nu m}))*M_{o n}-(\partial_{n}(A_{\nu}^{o})-\partial^{o}(A_{\nu n}))*M_{m o})
\begin{adjustwidth}{1em}{0cm}${}g^{\mu \nu} \brwrap{(}{\frac{1}{8}\partial_{\mu}{M^{m n}} \partial_{\nu}{M_{m n}} - \frac{1}{2}M^{m n} \partial_{\mu}{M_{m}\,^{o}} \partial_{o}{A_{\nu n}}+\frac{1}{2}M^{m n} \partial_{\mu}{M_{m}\,^{o}} \partial_{n}{A_{\nu o}} - \frac{1}{4}\partial_{\mu}{M^{m n}} \partial^{o}{M_{m n}} A_{\nu o} - \frac{1}{2}M^{m n} M_{m}\,^{o} \partial_{n}{A_{\mu}\,^{p}} \partial_{p}{A_{\nu o}}+\frac{1}{4}M^{m n} M_{m}\,^{o} \partial_{n}{A_{\mu}\,^{p}} \partial_{o}{A_{\nu p}}+\frac{1}{4}M^{m n} M_{m}\,^{o} \partial^{p}{A_{\mu n}} \partial_{p}{A_{\nu o}}+\frac{1}{2}M^{m n} M^{o p} \partial_{m}{A_{\mu o}} \partial_{p}{A_{\nu n}} - \frac{1}{2}M^{m n} M^{o p} \partial_{m}{A_{\mu o}} \partial_{n}{A_{\nu p}}+\frac{1}{2}M^{m n} \partial^{o}{M_{m}\,^{p}} A_{\mu o} \partial_{p}{A_{\nu n}} - \frac{1}{2}M^{m n} \partial^{o}{M_{m}\,^{p}} A_{\mu o} \partial_{n}{A_{\nu p}}+\frac{1}{8}\partial^{m}{M^{n o}} \partial^{p}{M_{n o}} A_{\mu m} A_{\nu p}}{)}$\\\end{adjustwidth}
g^{\mu \nu}*( 1/8 \partial_{\mu}(M^{m n})*\partial_{\nu}(M_{m n}) -  1/2 M^{m n}*\partial_{\mu}(M_{m}^{o})*\partial_{o}(A_{\nu n})+ 1/2 M^{m n}*\partial_{\mu}(M_{m}^{o})*\partial_{n}(A_{\nu o}) -  1/4 \partial_{\mu}(M^{m n})*\partial^{o}(M_{m n})*A_{\nu o} -  1/2 M^{m n}*M_{m}^{o}*\partial_{n}(A_{\mu}^{p})*\partial_{p}(A_{\nu o})+ 1/4 M^{m n}*M_{m}^{o}*\partial_{n}(A_{\mu}^{p})*\partial_{o}(A_{\nu p})+ 1/4 M^{m n}*M_{m}^{o}*\partial^{p}(A_{\mu n})*\partial_{p}(A_{\nu o})+ 1/2 M^{m n}*M^{o p}*\partial_{m}(A_{\mu o})*\partial_{p}(A_{\nu n}) -  1/2 M^{m n}*M^{o p}*\partial_{m}(A_{\mu o})*\partial_{n}(A_{\nu p})+ 1/2 M^{m n}*\partial^{o}(M_{m}^{p})*A_{\mu o}*\partial_{p}(A_{\nu n}) -  1/2 M^{m n}*\partial^{o}(M_{m}^{p})*A_{\mu o}*\partial_{n}(A_{\nu p})+ 1/8 \partial^{m}(M^{n o})*\partial^{p}(M_{n o})*A_{\mu m}*A_{\nu p})
MFF: Termino cinetico del campo de gauge
\begin{python}
MFF:=  -\frac{1}{4} g^{\mu \nu} g^{\rho \sigma} M^{m n} (\partial_{\mu}{ 2 A_{\rho m}} -2 A_{\mu}^{p} \partial_{p}{A_{\rho m}} + A_{\mu}^{p} \partial_{m}{A_{\rho p}} - \partial_{m}{b_{\mu \rho}}) 
(\partial_{\nu}{ A_{\sigma n}} - \partial_{\sigma}{ A_{\nu n}} - A_{\nu}^{o} \partial_{o}{A_{\sigma n}} + A_{\sigma}^{o} \partial_{o}{A_{\nu n}} + \frac{1}{2} A_{\nu}^{o} \partial_{n}{A_{\sigma o}} - \frac{1}{2} A_{\sigma}^{o} \partial_{n}{A_{\nu o}} - \partial_{n}{b_{\nu \sigma}});
converge(MFF): 
	distribute(_) 
	product_rule(_)
	sort_product(_) 
	canonicalise(_)
rename_dummies(_)
canonicalise(_)
sort_product(_)
sort_sum(_)
canonicalise(_)
factor_out(_, $g^{\mu \nu}$)
factor_out(_, $M^{m n}$);
\end{python}
\begin{adjustwidth}{1em}{0cm}${} - \frac{1}{4}g^{\mu \nu} g^{\rho \sigma} M^{m n} \brwrap{(}{2\partial_{\mu}{A_{\rho m}}-2A_{\mu}\,^{p} \partial_{p}{A_{\rho m}}+A_{\mu}\,^{p} \partial_{m}{A_{\rho p}}-\partial_{m}{b_{\mu \rho}}}{)} \brwrap{(}{\partial_{\nu}{A_{\sigma n}}-\partial_{\sigma}{A_{\nu n}}-A_{\nu}\,^{o} \partial_{o}{A_{\sigma n}}+A_{\sigma}\,^{o} \partial_{o}{A_{\nu n}}+\frac{1}{2}A_{\nu}\,^{o} \partial_{n}{A_{\sigma o}} - \frac{1}{2}A_{\sigma}\,^{o} \partial_{n}{A_{\nu o}}-\partial_{n}{b_{\nu \sigma}}}{)}$\\\end{adjustwidth}
 -  1/4 g^{\mu \nu}*g^{\rho \sigma}*M^{m n}*(2\partial_{\mu}(A_{\rho m})-2A_{\mu}^{p}*\partial_{p}(A_{\rho m})+A_{\mu}^{p}*\partial_{m}(A_{\rho p})-\partial_{m}(b_{\mu \rho}))*(\partial_{\nu}(A_{\sigma n})-\partial_{\sigma}(A_{\nu n})-A_{\nu}^{o}*\partial_{o}(A_{\sigma n})+A_{\sigma}^{o}*\partial_{o}(A_{\nu n})+ 1/2 A_{\nu}^{o}*\partial_{n}(A_{\sigma o}) -  1/2 A_{\sigma}^{o}*\partial_{n}(A_{\nu o})-\partial_{n}(b_{\nu \sigma}))
\begin{adjustwidth}{1em}{0cm}${}g^{\mu \nu} g^{\rho \sigma} M^{m n} \brwrap{(}{ - \frac{1}{2}\partial_{\mu}{A_{\rho m}} \partial_{\nu}{A_{\sigma n}}+\partial_{m}{b_{\mu \rho}} \partial_{\nu}{A_{\sigma n}} - \frac{1}{4}\partial_{m}{b_{\mu \rho}} \partial_{n}{b_{\nu \sigma}}-A_{\mu}\,^{o} \partial_{\rho}{A_{\nu m}} \partial_{o}{A_{\sigma n}}+\frac{1}{2}A_{\mu}\,^{o} \partial_{\rho}{A_{\nu m}} \partial_{n}{A_{\sigma o}}+A_{\mu}\,^{o} \partial_{\nu}{A_{\rho m}} \partial_{o}{A_{\sigma n}} - \frac{1}{2}A_{\mu}\,^{o} \partial_{\nu}{A_{\rho m}} \partial_{n}{A_{\sigma o}}-\partial_{m}{b_{\mu \rho}} A_{\nu}\,^{o} \partial_{o}{A_{\sigma n}}+\frac{1}{2}\partial_{m}{b_{\mu \rho}} A_{\nu}\,^{o} \partial_{n}{A_{\sigma o}} - \frac{1}{2}A_{\mu}\,^{o} A_{\nu}\,^{p} \partial_{o}{A_{\rho m}} \partial_{p}{A_{\sigma n}}+\frac{1}{2}A_{\mu}\,^{o} A_{\nu}\,^{p} \partial_{m}{A_{\rho o}} \partial_{p}{A_{\sigma n}} - \frac{1}{8}A_{\mu}\,^{o} A_{\nu}\,^{p} \partial_{m}{A_{\rho o}} \partial_{n}{A_{\sigma p}} - \frac{1}{2}A_{\mu}\,^{o} A_{\rho}\,^{p} \partial_{m}{A_{\nu p}} \partial_{o}{A_{\sigma n}}+\frac{1}{8}A_{\mu}\,^{o} A_{\rho}\,^{p} \partial_{m}{A_{\nu p}} \partial_{n}{A_{\sigma o}}+\frac{1}{2}A_{\mu}\,^{o} A_{\rho}\,^{p} \partial_{o}{A_{\sigma m}} \partial_{p}{A_{\nu n}}}{)}+\frac{1}{2}M^{m n} g^{\mu \nu} g^{\rho \sigma} \partial_{\mu}{A_{\rho m}} \partial_{\sigma}{A_{\nu n}}$\\\end{adjustwidth}
g^{\mu \nu}*g^{\rho \sigma}*M^{m n}*( -  1/2 \partial_{\mu}(A_{\rho m})*\partial_{\nu}(A_{\sigma n})+\partial_{m}(b_{\mu \rho})*\partial_{\nu}(A_{\sigma n}) -  1/4 \partial_{m}(b_{\mu \rho})*\partial_{n}(b_{\nu \sigma})-A_{\mu}^{o}*\partial_{\rho}(A_{\nu m})*\partial_{o}(A_{\sigma n})+ 1/2 A_{\mu}^{o}*\partial_{\rho}(A_{\nu m})*\partial_{n}(A_{\sigma o})+A_{\mu}^{o}*\partial_{\nu}(A_{\rho m})*\partial_{o}(A_{\sigma n}) -  1/2 A_{\mu}^{o}*\partial_{\nu}(A_{\rho m})*\partial_{n}(A_{\sigma o})-\partial_{m}(b_{\mu \rho})*A_{\nu}^{o}*\partial_{o}(A_{\sigma n})+ 1/2 \partial_{m}(b_{\mu \rho})*A_{\nu}^{o}*\partial_{n}(A_{\sigma o}) -  1/2 A_{\mu}^{o}*A_{\nu}^{p}*\partial_{o}(A_{\rho m})*\partial_{p}(A_{\sigma n})+ 1/2 A_{\mu}^{o}*A_{\nu}^{p}*\partial_{m}(A_{\rho o})*\partial_{p}(A_{\sigma n}) -  1/8 A_{\mu}^{o}*A_{\nu}^{p}*\partial_{m}(A_{\rho o})*\partial_{n}(A_{\sigma p}) -  1/2 A_{\mu}^{o}*A_{\rho}^{p}*\partial_{m}(A_{\nu p})*\partial_{o}(A_{\sigma n})+ 1/8 A_{\mu}^{o}*A_{\rho}^{p}*\partial_{m}(A_{\nu p})*\partial_{n}(A_{\sigma o})+ 1/2 A_{\mu}^{o}*A_{\rho}^{p}*\partial_{o}(A_{\sigma m})*\partial_{p}(A_{\nu n}))+ 1/2 M^{m n}*g^{\mu \nu}*g^{\rho \sigma}*\partial_{\mu}(A_{\rho m})*\partial_{\sigma}(A_{\nu n})
WW: Termino cinetico de la 2-forma
\begin{python}
asym( $3 \partial_{\mu}{b_{\nu \rho}} + 3 A_{\mu}^{p} \partial_{\nu}{A_{\rho p}} - 3 A_{\mu}^{p} \partial_{p}{ b_{\nu \rho} } + 2A_{\mu}^{p} A_{\nu}^{o} \partial_{o}{A_{\rho p}} - A_{\mu}^{p} A_{\nu}^{o} \partial_{p}{A_{\rho o}}$, $_{\mu}, _{\nu}, _{\rho}$)
antisym:= \frac{1}{2}\partial_{\mu}{b_{\nu \rho}} - \frac{1}{2}\partial_{\mu}{b_{\rho \nu}} - \frac{1}{2}\partial_{\nu}{b_{\mu \rho}}+\frac{1}{2}\partial_{\nu}{b_{\rho \mu}}+\frac{1}{2}\partial_{\rho}{b_{\mu \nu}} - \frac{1}{2}\partial_{\rho}{b_{\nu \mu}} 
+ \frac{1}{2}A_{\mu}^{p} \partial_{\nu}{A_{\rho p}} - \frac{1}{2}A_{\mu}^{p} \partial_{\rho}{A_{\nu p}} - \frac{1}{2}A_{\nu}^{p} \partial_{\mu}{A_{\rho p}}+\frac{1}{2}A_{\nu}^{p} \partial_{\rho}{A_{\mu p}}+\frac{1}{2}A_{\rho}^{p} \partial_{\mu}{A_{\nu p}} - \frac{1}{2}A_{\rho}^{p} \partial_{\nu}{A_{\mu p}} - \frac{1}{2}A_{\mu}^{p} \partial_{p}{b_{\nu \rho}}+\frac{1}{2}A_{\mu}^{p} \partial_{p}{b_{\rho \nu}}+\frac{1}{2}A_{\nu}^{p} \partial_{p}{b_{\mu \rho}} - \frac{1}{2}A_{\nu}^{p} \partial_{p}{b_{\rho \mu}} - \frac{1}{2}A_{\rho}^{p} \partial_{p}{b_{\mu \nu}}+\frac{1}{2}A_{\rho}^{p} \partial_{p}{b_{\nu \mu}}
+\frac{1}{3}A_{\mu}^{p} A_{\nu}^{o} \partial_{o}{A_{\rho p}} - \frac{1}{3}A_{\mu}^{p} A_{\rho}^{o} \partial_{o}{A_{\nu p}} - \frac{1}{3}A_{\nu}^{p} A_{\mu}^{o} \partial_{o}{A_{\rho p}}+\frac{1}{3}A_{\nu}^{p} A_{\rho}^{o} \partial_{o}{A_{\mu p}}+\frac{1}{3}A_{\rho}^{p} A_{\mu}^{o} \partial_{o}{A_{\nu p}} - \frac{1}{3}A_{\rho}^{p} A_{\nu}^{o} \partial_{o}{A_{\mu p}}
- \frac{1}{6}A_{\mu}^{p} A_{\nu}^{o} \partial_{p}{A_{\rho o}}+\frac{1}{6}A_{\mu}^{p} A_{\rho}^{o} \partial_{p}{A_{\nu o}}+\frac{1}{6}A_{\nu}^{p} A_{\mu}^{o} \partial_{p}{A_{\rho o}} - \frac{1}{6}A_{\nu}^{p} A_{\rho}^{o} \partial_{p}{A_{\mu o}} - \frac{1}{6}A_{\rho}^{p} A_{\mu}^{o} \partial_{p}{A_{\nu o}}+\frac{1}{6}A_{\rho}^{p} A_{\nu}^{o} \partial_{p}{A_{\mu o}}.


WW:= -\frac{1}{12}g^{\mu \sigma} g^{\nu \alpha} g^{\rho \beta} (\frac{1}{2}\partial_{\mu}{b_{\nu \rho}} - \frac{1}{2}\partial_{\mu}{b_{\rho \nu}} - \frac{1}{2}\partial_{\nu}{b_{\mu \rho}}+\frac{1}{2}\partial_{\nu}{b_{\rho \mu}}+\frac{1}{2}\partial_{\rho}{b_{\mu \nu}} - \frac{1}{2}\partial_{\rho}{b_{\nu \mu}} 
+ \frac{1}{2}A_{\mu}^{p} \partial_{\nu}{A_{\rho p}} - \frac{1}{2}A_{\mu}^{p} \partial_{\rho}{A_{\nu p}} - \frac{1}{2}A_{\nu}^{p} \partial_{\mu}{A_{\rho p}}+\frac{1}{2}A_{\nu}^{p} \partial_{\rho}{A_{\mu p}}+\frac{1}{2}A_{\rho}^{p} \partial_{\mu}{A_{\nu p}} - \frac{1}{2}A_{\rho}^{p} \partial_{\nu}{A_{\mu p}} - \frac{1}{2}A_{\mu}^{p} \partial_{p}{b_{\nu \rho}}+\frac{1}{2}A_{\mu}^{p} \partial_{p}{b_{\rho \nu}}+\frac{1}{2}A_{\nu}^{p} \partial_{p}{b_{\mu \rho}} - \frac{1}{2}A_{\nu}^{p} \partial_{p}{b_{\rho \mu}} - \frac{1}{2}A_{\rho}^{p} \partial_{p}{b_{\mu \nu}}+\frac{1}{2}A_{\rho}^{p} \partial_{p}{b_{\nu \mu}}
-( \frac{1}{3}A_{\mu}^{p} A_{\nu}^{o} \partial_{o}{A_{\rho p}} - \frac{1}{3}A_{\mu}^{p} A_{\rho}^{o} \partial_{o}{A_{\nu p}} - \frac{1}{3}A_{\nu}^{p} A_{\mu}^{o} \partial_{o}{A_{\rho p}}+\frac{1}{3}A_{\nu}^{p} A_{\rho}^{o} \partial_{o}{A_{\mu p}}+\frac{1}{3}A_{\rho}^{p} A_{\mu}^{o} \partial_{o}{A_{\nu p}} - \frac{1}{3}A_{\rho}^{p} A_{\nu}^{o} \partial_{o}{A_{\mu p}}
- \frac{1}{6}A_{\mu}^{p} A_{\nu}^{o} \partial_{p}{A_{\rho o}}+\frac{1}{6}A_{\mu}^{p} A_{\rho}^{o} \partial_{p}{A_{\nu o}}+\frac{1}{6}A_{\nu}^{p} A_{\mu}^{o} \partial_{p}{A_{\rho o}} - \frac{1}{6}A_{\nu}^{p} A_{\rho}^{o} \partial_{p}{A_{\mu o}} - \frac{1}{6}A_{\rho}^{p} A_{\mu}^{o} \partial_{p}{A_{\nu o}}+\frac{1}{6}A_{\rho}^{p} A_{\nu}^{o} \partial_{p}{A_{\mu o}}))
( 3 \partial_{\sigma}{b_{\alpha \beta}} + 3 A_{\sigma}^{m} \partial_{\alpha}{A_{\beta m}} - 3 A_{\sigma}^{m} \partial_{m}{ b_{\alpha \beta} } - 2A_{\sigma}^{m} A_{\alpha}^{n} \partial_{n}{A_{\beta m}} + A_{\sigma}^{m} A_{\alpha}^{n} \partial_{m}{A_{\beta n}} );
converge(WW): 
	distribute(_)
	sort_product(_) 
	canonicalise(_)
rename_dummies(_)
canonicalise(_)
sort_product(_)
sort_sum(_)
canonicalise(_)
factor_out(_, $g^{\mu \nu}$);
\end{python}
\begin{adjustwidth}{1em}{0cm}${} - \frac{1}{12}g^{\mu \sigma} g^{\nu \alpha} g^{\rho \beta} \brwrap{(}{\frac{1}{2}\partial_{\mu}{b_{\nu \rho}} - \frac{1}{2}\partial_{\mu}{b_{\rho \nu}} - \frac{1}{2}\partial_{\nu}{b_{\mu \rho}}+\frac{1}{2}\partial_{\nu}{b_{\rho \mu}}+\frac{1}{2}\partial_{\rho}{b_{\mu \nu}} - \frac{1}{2}\partial_{\rho}{b_{\nu \mu}}+\frac{1}{2}A_{\mu}\,^{p} \partial_{\nu}{A_{\rho p}} - \frac{1}{2}A_{\mu}\,^{p} \partial_{\rho}{A_{\nu p}} - \frac{1}{2}A_{\nu}\,^{p} \partial_{\mu}{A_{\rho p}}+\frac{1}{2}A_{\nu}\,^{p} \partial_{\rho}{A_{\mu p}}+\frac{1}{2}A_{\rho}\,^{p} \partial_{\mu}{A_{\nu p}} - \frac{1}{2}A_{\rho}\,^{p} \partial_{\nu}{A_{\mu p}} - \frac{1}{2}A_{\mu}\,^{p} \partial_{p}{b_{\nu \rho}}+\frac{1}{2}A_{\mu}\,^{p} \partial_{p}{b_{\rho \nu}}+\frac{1}{2}A_{\nu}\,^{p} \partial_{p}{b_{\mu \rho}} - \frac{1}{2}A_{\nu}\,^{p} \partial_{p}{b_{\rho \mu}} - \frac{1}{2}A_{\rho}\,^{p} \partial_{p}{b_{\mu \nu}}+\frac{1}{2}A_{\rho}\,^{p} \partial_{p}{b_{\nu \mu}} - \frac{1}{3}A_{\mu}\,^{p} A_{\nu}\,^{o} \partial_{o}{A_{\rho p}}%
+\frac{1}{3}A_{\mu}\,^{p} A_{\rho}\,^{o} \partial_{o}{A_{\nu p}}+\frac{1}{3}A_{\nu}\,^{p} A_{\mu}\,^{o} \partial_{o}{A_{\rho p}} - \frac{1}{3}A_{\nu}\,^{p} A_{\rho}\,^{o} \partial_{o}{A_{\mu p}} - \frac{1}{3}A_{\rho}\,^{p} A_{\mu}\,^{o} \partial_{o}{A_{\nu p}}+\frac{1}{3}A_{\rho}\,^{p} A_{\nu}\,^{o} \partial_{o}{A_{\mu p}}+\frac{1}{6}A_{\mu}\,^{p} A_{\nu}\,^{o} \partial_{p}{A_{\rho o}} - \frac{1}{6}A_{\mu}\,^{p} A_{\rho}\,^{o} \partial_{p}{A_{\nu o}} - \frac{1}{6}A_{\nu}\,^{p} A_{\mu}\,^{o} \partial_{p}{A_{\rho o}}+\frac{1}{6}A_{\nu}\,^{p} A_{\rho}\,^{o} \partial_{p}{A_{\mu o}}+\frac{1}{6}A_{\rho}\,^{p} A_{\mu}\,^{o} \partial_{p}{A_{\nu o}} - \frac{1}{6}A_{\rho}\,^{p} A_{\nu}\,^{o} \partial_{p}{A_{\mu o}}}{)} \brwrap{(}{3\partial_{\sigma}{b_{\alpha \beta}}+3A_{\sigma}\,^{m} \partial_{\alpha}{A_{\beta m}}-3A_{\sigma}\,^{m} \partial_{m}{b_{\alpha \beta}}-2A_{\sigma}\,^{m} A_{\alpha}\,^{n} \partial_{n}{A_{\beta m}}+A_{\sigma}\,^{m} A_{\alpha}\,^{n} \partial_{m}{A_{\beta n}}}{)}$\\\end{adjustwidth}
 -  1/12 g^{\mu \sigma}*g^{\nu \alpha}*g^{\rho \beta}*( 1/2 \partial_{\mu}(b_{\nu \rho}) -  1/2 \partial_{\mu}(b_{\rho \nu}) -  1/2 \partial_{\nu}(b_{\mu \rho})+ 1/2 \partial_{\nu}(b_{\rho \mu})+ 1/2 \partial_{\rho}(b_{\mu \nu}) -  1/2 \partial_{\rho}(b_{\nu \mu})+ 1/2 A_{\mu}^{p}*\partial_{\nu}(A_{\rho p}) -  1/2 A_{\mu}^{p}*\partial_{\rho}(A_{\nu p}) -  1/2 A_{\nu}^{p}*\partial_{\mu}(A_{\rho p})+ 1/2 A_{\nu}^{p}*\partial_{\rho}(A_{\mu p})+ 1/2 A_{\rho}^{p}*\partial_{\mu}(A_{\nu p}) -  1/2 A_{\rho}^{p}*\partial_{\nu}(A_{\mu p}) -  1/2 A_{\mu}^{p}*\partial_{p}(b_{\nu \rho})+ 1/2 A_{\mu}^{p}*\partial_{p}(b_{\rho \nu})+ 1/2 A_{\nu}^{p}*\partial_{p}(b_{\mu \rho}) -  1/2 A_{\nu}^{p}*\partial_{p}(b_{\rho \mu}) -  1/2 A_{\rho}^{p}*\partial_{p}(b_{\mu \nu})+ 1/2 A_{\rho}^{p}*\partial_{p}(b_{\nu \mu}) -  1/3 A_{\mu}^{p}*A_{\nu}^{o}*\partial_{o}(A_{\rho p})+ 1/3 A_{\mu}^{p}*A_{\rho}^{o}*\partial_{o}(A_{\nu p})+ 1/3 A_{\nu}^{p}*A_{\mu}^{o}*\partial_{o}(A_{\rho p}) -  1/3 A_{\nu}^{p}*A_{\rho}^{o}*\partial_{o}(A_{\mu p}) -  1/3 A_{\rho}^{p}*A_{\mu}^{o}*\partial_{o}(A_{\nu p})+ 1/3 A_{\rho}^{p}*A_{\nu}^{o}*\partial_{o}(A_{\mu p})+ 1/6 A_{\mu}^{p}*A_{\nu}^{o}*\partial_{p}(A_{\rho o}) -  1/6 A_{\mu}^{p}*A_{\rho}^{o}*\partial_{p}(A_{\nu o}) -  1/6 A_{\nu}^{p}*A_{\mu}^{o}*\partial_{p}(A_{\rho o})+ 1/6 A_{\nu}^{p}*A_{\rho}^{o}*\partial_{p}(A_{\mu o})+ 1/6 A_{\rho}^{p}*A_{\mu}^{o}*\partial_{p}(A_{\nu o}) -  1/6 A_{\rho}^{p}*A_{\nu}^{o}*\partial_{p}(A_{\mu o}))*(3\partial_{\sigma}(b_{\alpha \beta})+3A_{\sigma}^{m}*\partial_{\alpha}(A_{\beta m})-3A_{\sigma}^{m}*\partial_{m}(b_{\alpha \beta})-2A_{\sigma}^{m}*A_{\alpha}^{n}*\partial_{n}(A_{\beta m})+A_{\sigma}^{m}*A_{\alpha}^{n}*\partial_{m}(A_{\beta n}))
\begin{adjustwidth}{1em}{0cm}${}\frac{1}{2}g^{\mu \nu} g^{\alpha \lambda} g^{\rho \sigma} \partial_{\alpha}{b_{\mu \rho}} \partial_{\nu}{b_{\lambda \sigma}}+g^{\alpha \lambda} g^{\mu \nu} g^{\rho \sigma} \brwrap{(}{ - \frac{1}{4}\partial_{\alpha}{b_{\mu \rho}} \partial_{\lambda}{b_{\nu \sigma}} - \frac{1}{2}\partial_{\alpha}{b_{\mu \rho}} A_{\lambda}\,^{m} \partial_{\nu}{A_{\sigma m}} - \frac{1}{2}\partial_{\alpha}{b_{\mu \rho}} A_{\nu}\,^{m} \partial_{\sigma}{A_{\lambda m}}+\frac{1}{2}\partial_{\alpha}{b_{\mu \rho}} A_{\nu}\,^{m} \partial_{\lambda}{A_{\sigma m}}+\partial_{\alpha}{b_{\mu \rho}} \partial^{m}{b_{\lambda \nu}} A_{\sigma m}+\frac{1}{2}\partial_{\alpha}{b_{\mu \rho}} \partial^{m}{b_{\nu \sigma}} A_{\lambda m}+\frac{1}{8}A_{\alpha}\,^{m} A_{\lambda}\,^{n} \partial_{\mu}{A_{\rho m}} \partial_{\sigma}{A_{\nu n}} - \frac{1}{8}A_{\alpha}\,^{m} A_{\lambda}\,^{n} \partial_{\mu}{A_{\rho m}} \partial_{\nu}{A_{\sigma n}}+\frac{1}{8}A_{\alpha}\,^{m} A_{\mu}\,^{n} \partial_{\rho}{A_{\lambda n}} \partial_{\sigma}{A_{\nu m}} - \frac{1}{4}A_{\alpha}\,^{m} A_{\mu}\,^{n} \partial_{\lambda}{A_{\rho n}} \partial_{\sigma}{A_{\nu m}}+\frac{1}{8}A_{\alpha}\,^{m} A_{\mu}\,^{n} \partial_{\lambda}{A_{\rho n}} \partial_{\nu}{A_{\sigma m}} - \frac{1}{2}\partial^{m}{b_{\alpha \mu}} A_{\lambda}\,^{n} A_{\rho m} \partial_{\sigma}{A_{\nu n}}+\frac{1}{2}\partial^{m}{b_{\alpha \mu}} A_{\lambda}\,^{n} A_{\rho m} \partial_{\nu}{A_{\sigma n}}+\frac{1}{2}\partial^{m}{b_{\alpha \mu}} A_{\rho m} A_{\sigma}\,^{n} \partial_{\lambda}{A_{\nu n}} - \frac{1}{4}\partial^{m}{b_{\alpha \mu}} \partial^{n}{b_{\lambda \nu}} A_{\rho m} A_{\sigma n}+\frac{1}{2}\partial^{m}{b_{\alpha \mu}} \partial^{n}{b_{\lambda \rho}} A_{\nu n} A_{\sigma m}+\frac{1}{2}\partial_{\alpha}{b_{\mu \rho}} A_{\lambda}\,^{m} A_{\nu}\,^{n} \partial_{n}{A_{\sigma m}} - \frac{1}{2}\partial_{\alpha}{b_{\mu \rho}} A_{\lambda}\,^{m} A_{\nu}\,^{n} \partial_{m}{A_{\sigma n}} - \frac{1}{2}\partial_{\alpha}{b_{\mu \rho}} A_{\nu}\,^{m} A_{\sigma}\,^{n} \partial_{m}{A_{\lambda n}}%
 - \frac{1}{4}A_{\alpha}\,^{m} A_{\lambda}\,^{n} A_{\mu}\,^{o} \partial_{\rho}{A_{\nu m}} \partial_{o}{A_{\sigma n}}+\frac{1}{4}A_{\alpha}\,^{m} A_{\lambda}\,^{n} A_{\mu}\,^{o} \partial_{\rho}{A_{\nu m}} \partial_{n}{A_{\sigma o}}+\frac{1}{4}A_{\alpha}\,^{m} A_{\lambda}\,^{n} A_{\mu}\,^{o} \partial_{\nu}{A_{\rho m}} \partial_{o}{A_{\sigma n}} - \frac{1}{4}A_{\alpha}\,^{m} A_{\lambda}\,^{n} A_{\mu}\,^{o} \partial_{\nu}{A_{\rho m}} \partial_{n}{A_{\sigma o}}+\frac{1}{4}A_{\alpha}\,^{m} A_{\mu}\,^{n} A_{\rho}\,^{o} \partial_{\lambda}{A_{\nu o}} \partial_{n}{A_{\sigma m}} - \frac{1}{4}A_{\alpha}\,^{m} A_{\mu}\,^{n} A_{\rho}\,^{o} \partial_{\lambda}{A_{\nu o}} \partial_{m}{A_{\sigma n}}+\frac{1}{2}\partial^{m}{b_{\alpha \mu}} A_{\lambda}\,^{n} A_{\nu}\,^{o} A_{\rho m} \partial_{n}{A_{\sigma o}}+\frac{1}{2}\partial^{m}{b_{\alpha \mu}} A_{\lambda}\,^{n} A_{\rho m} A_{\sigma}\,^{o} \partial_{o}{A_{\nu n}} - \frac{1}{2}\partial^{m}{b_{\alpha \mu}} A_{\lambda}\,^{n} A_{\rho m} A_{\sigma}\,^{o} \partial_{n}{A_{\nu o}}+\frac{1}{8}A_{\alpha}\,^{m} A_{\lambda}\,^{n} A_{\mu}\,^{o} A_{\nu}\,^{p} \partial_{m}{A_{\rho o}} \partial_{p}{A_{\sigma n}} - \frac{1}{8}A_{\alpha}\,^{m} A_{\lambda}\,^{n} A_{\mu}\,^{o} A_{\nu}\,^{p} \partial_{m}{A_{\rho o}} \partial_{n}{A_{\sigma p}} - \frac{1}{4}A_{\alpha}\,^{m} A_{\lambda}\,^{n} A_{\mu}\,^{o} A_{\rho}\,^{p} \partial_{m}{A_{\nu p}} \partial_{o}{A_{\sigma n}}+\frac{1}{8}A_{\alpha}\,^{m} A_{\lambda}\,^{n} A_{\mu}\,^{o} A_{\rho}\,^{p} \partial_{m}{A_{\nu p}} \partial_{n}{A_{\sigma o}}+\frac{1}{8}A_{\alpha}\,^{m} A_{\lambda}\,^{n} A_{\mu}\,^{o} A_{\rho}\,^{p} \partial_{o}{A_{\sigma m}} \partial_{p}{A_{\nu n}}}{)}$\\\end{adjustwidth}
 1/2 g^{\mu \nu}*g^{\alpha \lambda}*g^{\rho \sigma}*\partial_{\alpha}(b_{\mu \rho})*\partial_{\nu}(b_{\lambda \sigma})+g^{\alpha \lambda}*g^{\mu \nu}*g^{\rho \sigma}*( -  1/4 \partial_{\alpha}(b_{\mu \rho})*\partial_{\lambda}(b_{\nu \sigma}) -  1/2 \partial_{\alpha}(b_{\mu \rho})*A_{\lambda}^{m}*\partial_{\nu}(A_{\sigma m}) -  1/2 \partial_{\alpha}(b_{\mu \rho})*A_{\nu}^{m}*\partial_{\sigma}(A_{\lambda m})+ 1/2 \partial_{\alpha}(b_{\mu \rho})*A_{\nu}^{m}*\partial_{\lambda}(A_{\sigma m})+\partial_{\alpha}(b_{\mu \rho})*\partial^{m}(b_{\lambda \nu})*A_{\sigma m}+ 1/2 \partial_{\alpha}(b_{\mu \rho})*\partial^{m}(b_{\nu \sigma})*A_{\lambda m}+ 1/8 A_{\alpha}^{m}*A_{\lambda}^{n}*\partial_{\mu}(A_{\rho m})*\partial_{\sigma}(A_{\nu n}) -  1/8 A_{\alpha}^{m}*A_{\lambda}^{n}*\partial_{\mu}(A_{\rho m})*\partial_{\nu}(A_{\sigma n})+ 1/8 A_{\alpha}^{m}*A_{\mu}^{n}*\partial_{\rho}(A_{\lambda n})*\partial_{\sigma}(A_{\nu m}) -  1/4 A_{\alpha}^{m}*A_{\mu}^{n}*\partial_{\lambda}(A_{\rho n})*\partial_{\sigma}(A_{\nu m})+ 1/8 A_{\alpha}^{m}*A_{\mu}^{n}*\partial_{\lambda}(A_{\rho n})*\partial_{\nu}(A_{\sigma m}) -  1/2 \partial^{m}(b_{\alpha \mu})*A_{\lambda}^{n}*A_{\rho m}*\partial_{\sigma}(A_{\nu n})+ 1/2 \partial^{m}(b_{\alpha \mu})*A_{\lambda}^{n}*A_{\rho m}*\partial_{\nu}(A_{\sigma n})+ 1/2 \partial^{m}(b_{\alpha \mu})*A_{\rho m}*A_{\sigma}^{n}*\partial_{\lambda}(A_{\nu n}) -  1/4 \partial^{m}(b_{\alpha \mu})*\partial^{n}(b_{\lambda \nu})*A_{\rho m}*A_{\sigma n}+ 1/2 \partial^{m}(b_{\alpha \mu})*\partial^{n}(b_{\lambda \rho})*A_{\nu n}*A_{\sigma m}+ 1/2 \partial_{\alpha}(b_{\mu \rho})*A_{\lambda}^{m}*A_{\nu}^{n}*\partial_{n}(A_{\sigma m}) -  1/2 \partial_{\alpha}(b_{\mu \rho})*A_{\lambda}^{m}*A_{\nu}^{n}*\partial_{m}(A_{\sigma n}) -  1/2 \partial_{\alpha}(b_{\mu \rho})*A_{\nu}^{m}*A_{\sigma}^{n}*\partial_{m}(A_{\lambda n}) -  1/4 A_{\alpha}^{m}*A_{\lambda}^{n}*A_{\mu}^{o}*\partial_{\rho}(A_{\nu m})*\partial_{o}(A_{\sigma n})+ 1/4 A_{\alpha}^{m}*A_{\lambda}^{n}*A_{\mu}^{o}*\partial_{\rho}(A_{\nu m})*\partial_{n}(A_{\sigma o})+ 1/4 A_{\alpha}^{m}*A_{\lambda}^{n}*A_{\mu}^{o}*\partial_{\nu}(A_{\rho m})*\partial_{o}(A_{\sigma n}) -  1/4 A_{\alpha}^{m}*A_{\lambda}^{n}*A_{\mu}^{o}*\partial_{\nu}(A_{\rho m})*\partial_{n}(A_{\sigma o})+ 1/4 A_{\alpha}^{m}*A_{\mu}^{n}*A_{\rho}^{o}*\partial_{\lambda}(A_{\nu o})*\partial_{n}(A_{\sigma m}) -  1/4 A_{\alpha}^{m}*A_{\mu}^{n}*A_{\rho}^{o}*\partial_{\lambda}(A_{\nu o})*\partial_{m}(A_{\sigma n})+ 1/2 \partial^{m}(b_{\alpha \mu})*A_{\lambda}^{n}*A_{\nu}^{o}*A_{\rho m}*\partial_{n}(A_{\sigma o})+ 1/2 \partial^{m}(b_{\alpha \mu})*A_{\lambda}^{n}*A_{\rho m}*A_{\sigma}^{o}*\partial_{o}(A_{\nu n}) -  1/2 \partial^{m}(b_{\alpha \mu})*A_{\lambda}^{n}*A_{\rho m}*A_{\sigma}^{o}*\partial_{n}(A_{\nu o})+ 1/8 A_{\alpha}^{m}*A_{\lambda}^{n}*A_{\mu}^{o}*A_{\nu}^{p}*\partial_{m}(A_{\rho o})*\partial_{p}(A_{\sigma n}) -  1/8 A_{\alpha}^{m}*A_{\lambda}^{n}*A_{\mu}^{o}*A_{\nu}^{p}*\partial_{m}(A_{\rho o})*\partial_{n}(A_{\sigma p}) -  1/4 A_{\alpha}^{m}*A_{\lambda}^{n}*A_{\mu}^{o}*A_{\rho}^{p}*\partial_{m}(A_{\nu p})*\partial_{o}(A_{\sigma n})+ 1/8 A_{\alpha}^{m}*A_{\lambda}^{n}*A_{\mu}^{o}*A_{\rho}^{p}*\partial_{m}(A_{\nu p})*\partial_{n}(A_{\sigma o})+ 1/8 A_{\alpha}^{m}*A_{\lambda}^{n}*A_{\mu}^{o}*A_{\rho}^{p}*\partial_{o}(A_{\sigma m})*\partial_{p}(A_{\nu n}))
Luego de esto, comencemos con el lagrangiano de DFT. En primer lugar escribimos la parametrizacion de la metrica generalizada 
y la definicion del dilaton generalizado d, en terminos del dilaton efectivo phi 
\begin{python}
H11:= H^{\mu \nu} -> g^{\mu \nu};
H12:= H^{\mu}_{\nu} -> -g^{\mu \rho}C_{\nu \rho};
H21:= H_{\mu}^{\nu} -> -g^{\nu \rho}C_{\mu \rho};
H13:= H^{\mu n} -> -g^{\mu \rho}A_{\rho}^{n};
H31:= H^{m \nu} -> -g^{\nu \rho}A_{\rho}^{m};
H22:= H_{\mu \nu} -> g_{\mu \nu} + C_{\mu \rho} g^{\rho \sigma} C_{\nu \sigma} + M^{o p} A_{\mu o} A_{\nu p};
H23:= H_{\mu n} -> C_{\mu \rho} g^{\rho \sigma}A_{\sigma n} + M_{p n} A_{\mu}^{p};
H33:= H_{m n} ->  A_{\rho m} g^{\rho \sigma} A_{\sigma n} + M_{m n};
partiald:= \partial_{a?}{d} -> -\frac{1}{4} g^{\mu \nu} \partial_{a?}{g_{\mu \nu}} + \partial_{a?}{\phi};
doublepartiald:= \partial_{b?}{ \partial_{a?}{d} } -> \partial_{b?}{ -\frac{1}{4} g^{\mu \nu} \partial_{a?}{g_{\mu \nu}} + \partial_{a?}{\phi} };
C:= C_{\mu \nu} -> b_{\mu \nu} + \frac{1}{2} A_{\mu}^{p} A_{\nu p};
\end{python}
\begin{adjustwidth}{1em}{0cm}${}H^{\mu \nu} \rightarrow g^{\mu \nu}$\\\end{adjustwidth}
H^{\mu \nu} → g^{\mu \nu}
\begin{adjustwidth}{1em}{0cm}${}H^{\mu}\,_{\nu} \rightarrow -g^{\mu \rho} C_{\nu \rho}$\\\end{adjustwidth}
H^{\mu}_{\nu} → -g^{\mu \rho}*C_{\nu \rho}
\begin{adjustwidth}{1em}{0cm}${}H_{\mu}\,^{\nu} \rightarrow -g^{\nu \rho} C_{\mu \rho}$\\\end{adjustwidth}
H_{\mu}^{\nu} → -g^{\nu \rho}*C_{\mu \rho}
\begin{adjustwidth}{1em}{0cm}${}H^{\mu n} \rightarrow -g^{\mu \rho} A_{\rho}\,^{n}$\\\end{adjustwidth}
H^{\mu n} → -g^{\mu \rho}*A_{\rho}^{n}
\begin{adjustwidth}{1em}{0cm}${}H^{m \nu} \rightarrow -g^{\nu \rho} A_{\rho}\,^{m}$\\\end{adjustwidth}
H^{m \nu} → -g^{\nu \rho}*A_{\rho}^{m}
\begin{adjustwidth}{1em}{0cm}${}H_{\mu \nu} \rightarrow g_{\mu \nu}+C_{\mu \rho} g^{\rho \sigma} C_{\nu \sigma}+M^{o p} A_{\mu o} A_{\nu p}$\\\end{adjustwidth}
H_{\mu \nu} → g_{\mu \nu}+C_{\mu \rho}*g^{\rho \sigma}*C_{\nu \sigma}+M^{o p}*A_{\mu o}*A_{\nu p}
\begin{adjustwidth}{1em}{0cm}${}H_{\mu n} \rightarrow C_{\mu \rho} g^{\rho \sigma} A_{\sigma n}+M_{p n} A_{\mu}\,^{p}$\\\end{adjustwidth}
H_{\mu n} → C_{\mu \rho}*g^{\rho \sigma}*A_{\sigma n}+M_{p n}*A_{\mu}^{p}
\begin{adjustwidth}{1em}{0cm}${}H_{m n} \rightarrow A_{\rho m} g^{\rho \sigma} A_{\sigma n}+M_{m n}$\\\end{adjustwidth}
H_{m n} → A_{\rho m}*g^{\rho \sigma}*A_{\sigma n}+M_{m n}
\begin{adjustwidth}{1em}{0cm}${}\partial_{a?}{d} \rightarrow  - \frac{1}{4}g^{\mu \nu} \partial_{a?}{g_{\mu \nu}}+\partial_{a?}{\phi}$\\\end{adjustwidth}
\partial_{a?}(d) →  -  1/4 g^{\mu \nu}*\partial_{a?}(g_{\mu \nu})+\partial_{a?}(\phi)
\begin{adjustwidth}{1em}{0cm}${}\partial_{b? a?}{d} \rightarrow \partial_{b?}\brwrap{(}{ - \frac{1}{4}g^{\mu \nu} \partial_{a?}{g_{\mu \nu}}+\partial_{a?}{\phi}}{)}$\\\end{adjustwidth}
\partial_{b? a?}(d) → \partial_{b?}(( -  1/4 g^{\mu \nu}*\partial_{a?}(g_{\mu \nu})+\partial_{a?}(\phi)))
\begin{adjustwidth}{1em}{0cm}${}C_{\mu \nu} \rightarrow b_{\mu \nu}+\frac{1}{2}A_{\mu}\,^{p} A_{\nu p}$\\\end{adjustwidth}
C_{\mu \nu} → b_{\mu \nu}+ 1/2 A_{\mu}^{p}*A_{\nu p}
Aqui definimos el lagrangiano de DFT. Para los terminos sin dilaton explicitamos los indices que
cambian de posicion al splitear ya que no conozco una manera de hacerlo automaticamente en cadabra
\begin{python}
LDFT:= 4 H^{M N} \partial_{M}{ \partial_{N}{ d } } -  \partial_{M}{ \partial_{N}{ H^{M N} } }
	  -4 H^{M N} \partial_{M}{ d } \partial_{N}{ d } + 4\partial_{M}{ H^{M N} } \partial_{N}{ d }
	  + \frac{1}{8} H^{M N} ( \partial_{M}{ H^{O P} } \partial_{N}{ H_{O P} } + \partial_{M}{ H_{\mu}^{P} } \partial_{N}{ H^{\mu}_{P} }
	  + \partial_{M}{ H_{\mu \nu} } \partial_{N}{ H^{\mu \nu} } + \partial_{M}{ H^{O}_{\mu} } \partial_{N}{ H_{O}^{\mu} } )
	  - \frac{1}{2} ( H^{M N} \partial_{M}{ H^{O P} } \partial_{O}{ H_{N P} } + H^{M}_{\nu} \partial_{M}{ H^{O P} } \partial_{O}{ H^{\nu}_{P} } 
	  + H^{M}_{\nu} \partial_{M}{ H^{O}_{\rho} } \partial_{O}{ H^{\nu \rho} } + H^{M N} \partial_{M}{ H^{O}_{\rho} } \partial_{O}{ H_{N}^{\rho} } );
\end{python}
\begin{adjustwidth}{1em}{0cm}${}4H^{M N} \partial_{M N}{d}-\partial_{M N}{H^{M N}}-4H^{M N} \partial_{M}{d} \partial_{N}{d}+4\partial_{M}{H^{M N}} \partial_{N}{d}+\frac{1}{8}H^{M N} \brwrap{(}{\partial_{M}{H^{O P}} \partial_{N}{H_{O P}}+\partial_{M}{H_{\mu}\,^{P}} \partial_{N}{H^{\mu}\,_{P}}+\partial_{M}{H_{\mu \nu}} \partial_{N}{H^{\mu \nu}}+\partial_{M}{H^{O}\,_{\mu}} \partial_{N}{H_{O}\,^{\mu}}}{)} - \frac{1}{2}H^{M N} \partial_{M}{H^{O P}} \partial_{O}{H_{N P}} - \frac{1}{2}H^{M}\,_{\nu} \partial_{M}{H^{O P}} \partial_{O}{H^{\nu}\,_{P}} - \frac{1}{2}H^{M}\,_{\nu} \partial_{M}{H^{O}\,_{\rho}} \partial_{O}{H^{\nu \rho}} - \frac{1}{2}H^{M N} \partial_{M}{H^{O}\,_{\rho}} \partial_{O}{H_{N}\,^{\rho}}$\\\end{adjustwidth}
4H^{M N}*\partial_{M N}(d)-\partial_{M N}(H^{M N})-4H^{M N}*\partial_{M}(d)*\partial_{N}(d)+4\partial_{M}(H^{M N})*\partial_{N}(d)+ 1/8 H^{M N}*(\partial_{M}(H^{O P})*\partial_{N}(H_{O P})+\partial_{M}(H_{\mu}^{P})*\partial_{N}(H^{\mu}_{P})+\partial_{M}(H_{\mu \nu})*\partial_{N}(H^{\mu \nu})+\partial_{M}(H^{O}_{\mu})*\partial_{N}(H_{O}^{\mu})) -  1/2 H^{M N}*\partial_{M}(H^{O P})*\partial_{O}(H_{N P}) -  1/2 H^{M}_{\nu}*\partial_{M}(H^{O P})*\partial_{O}(H^{\nu}_{P}) -  1/2 H^{M}_{\nu}*\partial_{M}(H^{O}_{\rho})*\partial_{O}(H^{\nu \rho}) -  1/2 H^{M N}*\partial_{M}(H^{O}_{\rho})*\partial_{O}(H_{N}^{\rho})
Parte 1: En esta parte nos proponemos analizar el fragmento de lagrangiano con dilaton generalizado
\begin{python}
LDFT_dilaton:= 4 H^{M N} \partial_{M}{ \partial_{N}{ d } } -  \partial_{M}{ \partial_{N}{ H^{M N} } }
	  -4 H^{M N} \partial_{M}{ d } \partial_{N}{ d } + 4\partial_{M}{ H^{M N} } \partial_{N}{ d };
split_index(_, $M, \mu, m$, repeat=True)
substitute(_,H11)
substitute(_,H33)
substitute(_,H13)
substitute(_,H31)
distribute(_)
substitute(_, $ M^{m n} \partial_{m}{ \partial_{n}{ d } } -> 0$)
substitute(_, $ \partial^{m}{ \partial^{n}{ M_{m n} } } -> 0$)
substitute(_, $ M^{m n} \partial_{m}{ d } \partial_{n}{ d } -> 0$)
substitute(_, $ \partial^{m}{ M_{m}^{n} } \partial_{n}{ d }  -> 0$)
substitute(_, partiald)
substitute(_, doublepartiald)
converge(LDFT_dilaton): 
	distribute(_) 
	product_rule(_) 
	canonicalise(_)
rename_dummies(_)
canonicalise(_)
sort_product(_)
sort_sum(_)
canonicalise(_);
\end{python}
\begin{adjustwidth}{1em}{0cm}${}4H^{M N} \partial_{M N}{d}-\partial_{M N}{H^{M N}}-4H^{M N} \partial_{M}{d} \partial_{N}{d}+4\partial_{M}{H^{M N}} \partial_{N}{d}$\\\end{adjustwidth}
4H^{M N}*\partial_{M N}(d)-\partial_{M N}(H^{M N})-4H^{M N}*\partial_{M}(d)*\partial_{N}(d)+4\partial_{M}(H^{M N})*\partial_{N}(d)
\begin{adjustwidth}{1em}{0cm}${}-\partial_{\mu \nu}{g^{\mu \nu}}+2\partial_{\mu}{A_{\nu}\,^{m}} \partial_{m}{g^{\mu \nu}}+2\partial^{m}{A_{\mu m}} \partial_{\nu}{g^{\mu \nu}}+4\partial_{\mu}{\phi} \partial_{\nu}{g^{\mu \nu}}+2\partial_{\mu}\,^{m}{g^{\mu \nu}} A_{\nu m}+2g^{\mu \nu} \partial_{\mu}\,^{m}{A_{\nu m}}+4g^{\mu \nu} \partial_{\mu \nu}{\phi}-2A_{\mu}\,^{m} \partial_{m}{A_{\nu}\,^{n}} \partial_{n}{g^{\mu \nu}}-2A_{\mu}\,^{m} \partial^{n}{A_{\nu n}} \partial_{m}{g^{\mu \nu}}-4\partial_{\mu}{\phi} A_{\nu}\,^{m} \partial_{m}{g^{\mu \nu}}-4\partial^{m}{\phi} A_{\mu m} \partial_{\nu}{g^{\mu \nu}}-\partial^{m n}{g^{\mu \nu}} A_{\mu m} A_{\nu n}-g^{\mu \nu} A_{\mu}\,^{m} \partial_{m}\,^{n}{A_{\nu n}}-g^{\mu \nu} \partial^{m}{A_{\mu m}} \partial^{n}{A_{\nu n}}-g^{\mu \nu} \partial^{m}{A_{\mu}\,^{n}} \partial_{n}{A_{\nu m}}-4g^{\mu \nu} \partial_{\mu}{\phi} \partial_{\nu}{\phi}-4g^{\mu \nu} \partial_{\mu}{\phi} \partial^{m}{A_{\nu m}}-4g^{\mu \nu} \partial^{m}{\phi} \partial_{\mu}{A_{\nu m}}-g^{\mu \nu} \partial_{\mu}{g^{\rho \sigma}} \partial_{\nu}{g_{\rho \sigma}}%
-g^{\mu \nu} \partial^{m n}{A_{\mu m}} A_{\nu n}-8g^{\mu \nu} \partial_{\mu}\,^{m}{\phi} A_{\nu m}-g^{\mu \nu} g^{\rho \sigma} \partial_{\mu \nu}{g_{\rho \sigma}}-g^{\mu \nu} \partial_{\rho}{g^{\rho \sigma}} \partial_{\sigma}{g_{\mu \nu}}+4\partial^{m}{\phi} A_{\mu m} A_{\nu}\,^{n} \partial_{n}{g^{\mu \nu}}+g^{\mu \nu} A_{\mu}\,^{m} \partial_{\nu}{g^{\rho \sigma}} \partial_{m}{g_{\rho \sigma}}+g^{\mu \nu} A_{\mu}\,^{m} \partial_{m}{g^{\rho \sigma}} \partial_{\nu}{g_{\rho \sigma}}+8g^{\mu \nu} \partial_{\mu}{\phi} \partial^{m}{\phi} A_{\nu m}+4g^{\mu \nu} \partial^{m}{\phi} A_{\mu}\,^{n} \partial_{n}{A_{\nu m}}+4g^{\mu \nu} \partial^{m}{\phi} A_{\mu m} \partial^{n}{A_{\nu n}}+4g^{\mu \nu} \partial^{m n}{\phi} A_{\mu m} A_{\nu n}+g^{\mu \nu} g^{\rho \sigma} \partial^{m}{A_{\mu m}} \partial_{\nu}{g_{\rho \sigma}}+g^{\mu \nu} g^{\rho \sigma} \partial_{\mu}{A_{\nu}\,^{m}} \partial_{m}{g_{\rho \sigma}}+2g^{\mu \nu} g^{\rho \sigma} \partial_{\mu}{\phi} \partial_{\nu}{g_{\rho \sigma}}+2g^{\mu \nu} g^{\rho \sigma} \partial_{\mu}\,^{m}{g_{\rho \sigma}} A_{\nu m}+g^{\mu \nu} A_{\rho}\,^{m} \partial_{m}{g^{\rho \sigma}} \partial_{\sigma}{g_{\mu \nu}}+g^{\mu \nu} A_{\rho}\,^{m} \partial_{\sigma}{g^{\rho \sigma}} \partial_{m}{g_{\mu \nu}} - \frac{1}{4}g^{\alpha \lambda} g^{\mu \nu} g^{\rho \sigma} \partial_{\alpha}{g_{\mu \nu}} \partial_{\lambda}{g_{\rho \sigma}}-g^{\mu \nu} A_{\mu}\,^{m} A_{\nu}\,^{n} \partial_{m}{g^{\rho \sigma}} \partial_{n}{g_{\rho \sigma}}-4g^{\mu \nu} \partial^{m}{\phi} \partial^{n}{\phi} A_{\mu m} A_{\nu n}%
-g^{\mu \nu} g^{\rho \sigma} A_{\mu}\,^{m} \partial_{m}{A_{\nu}\,^{n}} \partial_{n}{g_{\rho \sigma}}-g^{\mu \nu} g^{\rho \sigma} A_{\mu}\,^{m} \partial^{n}{A_{\nu n}} \partial_{m}{g_{\rho \sigma}}-2g^{\mu \nu} g^{\rho \sigma} \partial_{\mu}{\phi} A_{\nu}\,^{m} \partial_{m}{g_{\rho \sigma}}-2g^{\mu \nu} g^{\rho \sigma} \partial^{m}{\phi} A_{\mu m} \partial_{\nu}{g_{\rho \sigma}}-g^{\mu \nu} g^{\rho \sigma} \partial^{m n}{g_{\mu \nu}} A_{\rho m} A_{\sigma n}-g^{\mu \nu} A_{\rho}\,^{m} A_{\sigma}\,^{n} \partial_{m}{g^{\rho \sigma}} \partial_{n}{g_{\mu \nu}}+\frac{1}{2}g^{\alpha \lambda} g^{\mu \nu} g^{\rho \sigma} A_{\alpha}\,^{m} \partial_{\lambda}{g_{\mu \nu}} \partial_{m}{g_{\rho \sigma}}+2g^{\mu \nu} g^{\rho \sigma} \partial^{m}{\phi} A_{\mu m} A_{\nu}\,^{n} \partial_{n}{g_{\rho \sigma}} - \frac{1}{4}g^{\alpha \lambda} g^{\mu \nu} g^{\rho \sigma} A_{\alpha}\,^{m} A_{\lambda}\,^{n} \partial_{m}{g_{\mu \nu}} \partial_{n}{g_{\rho \sigma}}$\\\end{adjustwidth}
-\partial_{\mu \nu}(g^{\mu \nu})+2\partial_{\mu}(A_{\nu}^{m})*\partial_{m}(g^{\mu \nu})+2\partial^{m}(A_{\mu m})*\partial_{\nu}(g^{\mu \nu})+4\partial_{\mu}(\phi)*\partial_{\nu}(g^{\mu \nu})+2\partial_{\mu}^{m}(g^{\mu \nu})*A_{\nu m}+2g^{\mu \nu}*\partial_{\mu}^{m}(A_{\nu m})+4g^{\mu \nu}*\partial_{\mu \nu}(\phi)-2A_{\mu}^{m}*\partial_{m}(A_{\nu}^{n})*\partial_{n}(g^{\mu \nu})-2A_{\mu}^{m}*\partial^{n}(A_{\nu n})*\partial_{m}(g^{\mu \nu})-4\partial_{\mu}(\phi)*A_{\nu}^{m}*\partial_{m}(g^{\mu \nu})-4\partial^{m}(\phi)*A_{\mu m}*\partial_{\nu}(g^{\mu \nu})-\partial^{m n}(g^{\mu \nu})*A_{\mu m}*A_{\nu n}-g^{\mu \nu}*A_{\mu}^{m}*\partial_{m}^{n}(A_{\nu n})-g^{\mu \nu}*\partial^{m}(A_{\mu m})*\partial^{n}(A_{\nu n})-g^{\mu \nu}*\partial^{m}(A_{\mu}^{n})*\partial_{n}(A_{\nu m})-4g^{\mu \nu}*\partial_{\mu}(\phi)*\partial_{\nu}(\phi)-4g^{\mu \nu}*\partial_{\mu}(\phi)*\partial^{m}(A_{\nu m})-4g^{\mu \nu}*\partial^{m}(\phi)*\partial_{\mu}(A_{\nu m})-g^{\mu \nu}*\partial_{\mu}(g^{\rho \sigma})*\partial_{\nu}(g_{\rho \sigma})-g^{\mu \nu}*\partial^{m n}(A_{\mu m})*A_{\nu n}-8g^{\mu \nu}*\partial_{\mu}^{m}(\phi)*A_{\nu m}-g^{\mu \nu}*g^{\rho \sigma}*\partial_{\mu \nu}(g_{\rho \sigma})-g^{\mu \nu}*\partial_{\rho}(g^{\rho \sigma})*\partial_{\sigma}(g_{\mu \nu})+4\partial^{m}(\phi)*A_{\mu m}*A_{\nu}^{n}*\partial_{n}(g^{\mu \nu})+g^{\mu \nu}*A_{\mu}^{m}*\partial_{\nu}(g^{\rho \sigma})*\partial_{m}(g_{\rho \sigma})+g^{\mu \nu}*A_{\mu}^{m}*\partial_{m}(g^{\rho \sigma})*\partial_{\nu}(g_{\rho \sigma})+8g^{\mu \nu}*\partial_{\mu}(\phi)*\partial^{m}(\phi)*A_{\nu m}+4g^{\mu \nu}*\partial^{m}(\phi)*A_{\mu}^{n}*\partial_{n}(A_{\nu m})+4g^{\mu \nu}*\partial^{m}(\phi)*A_{\mu m}*\partial^{n}(A_{\nu n})+4g^{\mu \nu}*\partial^{m n}(\phi)*A_{\mu m}*A_{\nu n}+g^{\mu \nu}*g^{\rho \sigma}*\partial^{m}(A_{\mu m})*\partial_{\nu}(g_{\rho \sigma})+g^{\mu \nu}*g^{\rho \sigma}*\partial_{\mu}(A_{\nu}^{m})*\partial_{m}(g_{\rho \sigma})+2g^{\mu \nu}*g^{\rho \sigma}*\partial_{\mu}(\phi)*\partial_{\nu}(g_{\rho \sigma})+2g^{\mu \nu}*g^{\rho \sigma}*\partial_{\mu}^{m}(g_{\rho \sigma})*A_{\nu m}+g^{\mu \nu}*A_{\rho}^{m}*\partial_{m}(g^{\rho \sigma})*\partial_{\sigma}(g_{\mu \nu})+g^{\mu \nu}*A_{\rho}^{m}*\partial_{\sigma}(g^{\rho \sigma})*\partial_{m}(g_{\mu \nu}) -  1/4 g^{\alpha \lambda}*g^{\mu \nu}*g^{\rho \sigma}*\partial_{\alpha}(g_{\mu \nu})*\partial_{\lambda}(g_{\rho \sigma})-g^{\mu \nu}*A_{\mu}^{m}*A_{\nu}^{n}*\partial_{m}(g^{\rho \sigma})*\partial_{n}(g_{\rho \sigma})-4g^{\mu \nu}*\partial^{m}(\phi)*\partial^{n}(\phi)*A_{\mu m}*A_{\nu n}-g^{\mu \nu}*g^{\rho \sigma}*A_{\mu}^{m}*\partial_{m}(A_{\nu}^{n})*\partial_{n}(g_{\rho \sigma})-g^{\mu \nu}*g^{\rho \sigma}*A_{\mu}^{m}*\partial^{n}(A_{\nu n})*\partial_{m}(g_{\rho \sigma})-2g^{\mu \nu}*g^{\rho \sigma}*\partial_{\mu}(\phi)*A_{\nu}^{m}*\partial_{m}(g_{\rho \sigma})-2g^{\mu \nu}*g^{\rho \sigma}*\partial^{m}(\phi)*A_{\mu m}*\partial_{\nu}(g_{\rho \sigma})-g^{\mu \nu}*g^{\rho \sigma}*\partial^{m n}(g_{\mu \nu})*A_{\rho m}*A_{\sigma n}-g^{\mu \nu}*A_{\rho}^{m}*A_{\sigma}^{n}*\partial_{m}(g^{\rho \sigma})*\partial_{n}(g_{\mu \nu})+ 1/2 g^{\alpha \lambda}*g^{\mu \nu}*g^{\rho \sigma}*A_{\alpha}^{m}*\partial_{\lambda}(g_{\mu \nu})*\partial_{m}(g_{\rho \sigma})+2g^{\mu \nu}*g^{\rho \sigma}*\partial^{m}(\phi)*A_{\mu m}*A_{\nu}^{n}*\partial_{n}(g_{\rho \sigma}) -  1/4 g^{\alpha \lambda}*g^{\mu \nu}*g^{\rho \sigma}*A_{\alpha}^{m}*A_{\lambda}^{n}*\partial_{m}(g_{\mu \nu})*\partial_{n}(g_{\rho \sigma})
En la expresion anterior sacamos los 4 terminos correspondientes al potencial escalar, este es el escalar de curvatura de DFT con M y d en lugar de H y d.
A su vez, la manera de escribir todo sin canonicalizar hasta luego de sustituir todo es porque, debido a nuestros reemplazos, 
importa el orden de las derivadas dobles mixtas (m mu, mu m) sobre el dilaton generalizado, no hacer esta distincion lleva a falsos resultados.
Analizando detalladamente vemos que todos los terminos con phi corresponden al modelo sigma para el dilaton aunque faltan algunos terminos para completarlo,
estos son aquellos que no tienen dependencia en phi por lo que esperamos recuperarlos de los siguientes terminos.
Para seguir con el analisis de forma mas prolija, tiramos todos los terminos con dilaton
\begin{python}
substitute(_, $\phi -> 0$);
\end{python}
\begin{adjustwidth}{1em}{0cm}${}-\partial_{\mu \nu}{g^{\mu \nu}}+2\partial_{\mu}{A_{\nu}\,^{m}} \partial_{m}{g^{\mu \nu}}+2\partial^{m}{A_{\mu m}} \partial_{\nu}{g^{\mu \nu}}+2\partial_{\mu}\,^{m}{g^{\mu \nu}} A_{\nu m}+2g^{\mu \nu} \partial_{\mu}\,^{m}{A_{\nu m}}-2A_{\mu}\,^{m} \partial_{m}{A_{\nu}\,^{n}} \partial_{n}{g^{\mu \nu}}-2A_{\mu}\,^{m} \partial^{n}{A_{\nu n}} \partial_{m}{g^{\mu \nu}}-\partial^{m n}{g^{\mu \nu}} A_{\mu m} A_{\nu n}-g^{\mu \nu} A_{\mu}\,^{m} \partial_{m}\,^{n}{A_{\nu n}}-g^{\mu \nu} \partial^{m}{A_{\mu m}} \partial^{n}{A_{\nu n}}-g^{\mu \nu} \partial^{m}{A_{\mu}\,^{n}} \partial_{n}{A_{\nu m}}-g^{\mu \nu} \partial_{\mu}{g^{\rho \sigma}} \partial_{\nu}{g_{\rho \sigma}}-g^{\mu \nu} \partial^{m n}{A_{\mu m}} A_{\nu n}-g^{\mu \nu} g^{\rho \sigma} \partial_{\mu \nu}{g_{\rho \sigma}}-g^{\mu \nu} \partial_{\rho}{g^{\rho \sigma}} \partial_{\sigma}{g_{\mu \nu}}+g^{\mu \nu} A_{\mu}\,^{m} \partial_{\nu}{g^{\rho \sigma}} \partial_{m}{g_{\rho \sigma}}+g^{\mu \nu} A_{\mu}\,^{m} \partial_{m}{g^{\rho \sigma}} \partial_{\nu}{g_{\rho \sigma}}+g^{\mu \nu} g^{\rho \sigma} \partial^{m}{A_{\mu m}} \partial_{\nu}{g_{\rho \sigma}}+g^{\mu \nu} g^{\rho \sigma} \partial_{\mu}{A_{\nu}\,^{m}} \partial_{m}{g_{\rho \sigma}}%
+2g^{\mu \nu} g^{\rho \sigma} \partial_{\mu}\,^{m}{g_{\rho \sigma}} A_{\nu m}+g^{\mu \nu} A_{\rho}\,^{m} \partial_{m}{g^{\rho \sigma}} \partial_{\sigma}{g_{\mu \nu}}+g^{\mu \nu} A_{\rho}\,^{m} \partial_{\sigma}{g^{\rho \sigma}} \partial_{m}{g_{\mu \nu}} - \frac{1}{4}g^{\alpha \lambda} g^{\mu \nu} g^{\rho \sigma} \partial_{\alpha}{g_{\mu \nu}} \partial_{\lambda}{g_{\rho \sigma}}-g^{\mu \nu} A_{\mu}\,^{m} A_{\nu}\,^{n} \partial_{m}{g^{\rho \sigma}} \partial_{n}{g_{\rho \sigma}}-g^{\mu \nu} g^{\rho \sigma} A_{\mu}\,^{m} \partial_{m}{A_{\nu}\,^{n}} \partial_{n}{g_{\rho \sigma}}-g^{\mu \nu} g^{\rho \sigma} A_{\mu}\,^{m} \partial^{n}{A_{\nu n}} \partial_{m}{g_{\rho \sigma}}-g^{\mu \nu} g^{\rho \sigma} \partial^{m n}{g_{\mu \nu}} A_{\rho m} A_{\sigma n}-g^{\mu \nu} A_{\rho}\,^{m} A_{\sigma}\,^{n} \partial_{m}{g^{\rho \sigma}} \partial_{n}{g_{\mu \nu}}+\frac{1}{2}g^{\alpha \lambda} g^{\mu \nu} g^{\rho \sigma} A_{\alpha}\,^{m} \partial_{\lambda}{g_{\mu \nu}} \partial_{m}{g_{\rho \sigma}} - \frac{1}{4}g^{\alpha \lambda} g^{\mu \nu} g^{\rho \sigma} A_{\alpha}\,^{m} A_{\lambda}\,^{n} \partial_{m}{g_{\mu \nu}} \partial_{n}{g_{\rho \sigma}}$\\\end{adjustwidth}
-\partial_{\mu \nu}(g^{\mu \nu})+2\partial_{\mu}(A_{\nu}^{m})*\partial_{m}(g^{\mu \nu})+2\partial^{m}(A_{\mu m})*\partial_{\nu}(g^{\mu \nu})+2\partial_{\mu}^{m}(g^{\mu \nu})*A_{\nu m}+2g^{\mu \nu}*\partial_{\mu}^{m}(A_{\nu m})-2A_{\mu}^{m}*\partial_{m}(A_{\nu}^{n})*\partial_{n}(g^{\mu \nu})-2A_{\mu}^{m}*\partial^{n}(A_{\nu n})*\partial_{m}(g^{\mu \nu})-\partial^{m n}(g^{\mu \nu})*A_{\mu m}*A_{\nu n}-g^{\mu \nu}*A_{\mu}^{m}*\partial_{m}^{n}(A_{\nu n})-g^{\mu \nu}*\partial^{m}(A_{\mu m})*\partial^{n}(A_{\nu n})-g^{\mu \nu}*\partial^{m}(A_{\mu}^{n})*\partial_{n}(A_{\nu m})-g^{\mu \nu}*\partial_{\mu}(g^{\rho \sigma})*\partial_{\nu}(g_{\rho \sigma})-g^{\mu \nu}*\partial^{m n}(A_{\mu m})*A_{\nu n}-g^{\mu \nu}*g^{\rho \sigma}*\partial_{\mu \nu}(g_{\rho \sigma})-g^{\mu \nu}*\partial_{\rho}(g^{\rho \sigma})*\partial_{\sigma}(g_{\mu \nu})+g^{\mu \nu}*A_{\mu}^{m}*\partial_{\nu}(g^{\rho \sigma})*\partial_{m}(g_{\rho \sigma})+g^{\mu \nu}*A_{\mu}^{m}*\partial_{m}(g^{\rho \sigma})*\partial_{\nu}(g_{\rho \sigma})+g^{\mu \nu}*g^{\rho \sigma}*\partial^{m}(A_{\mu m})*\partial_{\nu}(g_{\rho \sigma})+g^{\mu \nu}*g^{\rho \sigma}*\partial_{\mu}(A_{\nu}^{m})*\partial_{m}(g_{\rho \sigma})+2g^{\mu \nu}*g^{\rho \sigma}*\partial_{\mu}^{m}(g_{\rho \sigma})*A_{\nu m}+g^{\mu \nu}*A_{\rho}^{m}*\partial_{m}(g^{\rho \sigma})*\partial_{\sigma}(g_{\mu \nu})+g^{\mu \nu}*A_{\rho}^{m}*\partial_{\sigma}(g^{\rho \sigma})*\partial_{m}(g_{\mu \nu}) -  1/4 g^{\alpha \lambda}*g^{\mu \nu}*g^{\rho \sigma}*\partial_{\alpha}(g_{\mu \nu})*\partial_{\lambda}(g_{\rho \sigma})-g^{\mu \nu}*A_{\mu}^{m}*A_{\nu}^{n}*\partial_{m}(g^{\rho \sigma})*\partial_{n}(g_{\rho \sigma})-g^{\mu \nu}*g^{\rho \sigma}*A_{\mu}^{m}*\partial_{m}(A_{\nu}^{n})*\partial_{n}(g_{\rho \sigma})-g^{\mu \nu}*g^{\rho \sigma}*A_{\mu}^{m}*\partial^{n}(A_{\nu n})*\partial_{m}(g_{\rho \sigma})-g^{\mu \nu}*g^{\rho \sigma}*\partial^{m n}(g_{\mu \nu})*A_{\rho m}*A_{\sigma n}-g^{\mu \nu}*A_{\rho}^{m}*A_{\sigma}^{n}*\partial_{m}(g^{\rho \sigma})*\partial_{n}(g_{\mu \nu})+ 1/2 g^{\alpha \lambda}*g^{\mu \nu}*g^{\rho \sigma}*A_{\alpha}^{m}*\partial_{\lambda}(g_{\mu \nu})*\partial_{m}(g_{\rho \sigma}) -  1/4 g^{\alpha \lambda}*g^{\mu \nu}*g^{\rho \sigma}*A_{\alpha}^{m}*A_{\lambda}^{n}*\partial_{m}(g_{\mu \nu})*\partial_{n}(g_{\rho \sigma})
De aqí vemos que se recupera una gran parte del ricci covariante mientras que otros contrubuyen a los temrinos del modelo sigma para el dilaton
que no tienen dependencia en phi. A final de todo sobran35 terminos que debemos ubicar lueg.u
Parte 2: Pasemos ahora al lagrangiano sin dilaton, analizando el primer termino obtenemos
\begin{python}
LDFT_nodilaton1:= \frac{1}{8} H^{M N} ( \partial_{M}{ H^{O P} } \partial_{N}{ H_{O P} } + \partial_{M}{ H_{\mu}^{P} } \partial_{N}{ H^{\mu}_{P} }
	  + \partial_{M}{ H_{\mu \nu} } \partial_{N}{ H^{\mu \nu} } + \partial_{M}{ H^{O}_{\mu} } \partial_{N}{ H_{O}^{\mu} } );
split_index(_, $M, \mu, m$,repeat=True)
converge(LDFT_nodilaton1): 
	distribute(_) 
	product_rule(_)
	sort_product(_) 
	canonicalise(_)
substitute(_,$ D?? \partial_{a?}{H_{\nu \rho} } -> \partial_{a?}{H_{\nu \rho} } D?? $)
canonicalise(_)
rename_dummies(_)
substitute(_,H11)
substitute(_,H12)
substitute(_,H21)
substitute(_,H13)
substitute(_,H22)
substitute(_,H23)
substitute(_,H33)
rename_dummies(_)
substitute(_,C)
converge(LDFT_nodilaton1): 
	distribute(_) 
	product_rule(_)
	sort_product(_) 
	canonicalise(_)
rename_dummies(_)
canonicalise(_)
sort_product(_)
sort_sum(_)
canonicalise(_);
\end{python}
\begin{adjustwidth}{1em}{0cm}${}\frac{1}{8}H^{M N} \brwrap{(}{\partial_{M}{H^{O P}} \partial_{N}{H_{O P}}+\partial_{M}{H_{\mu}\,^{P}} \partial_{N}{H^{\mu}\,_{P}}+\partial_{M}{H_{\mu \nu}} \partial_{N}{H^{\mu \nu}}+\partial_{M}{H^{O}\,_{\mu}} \partial_{N}{H_{O}\,^{\mu}}}{)}$\\\end{adjustwidth}
 1/8 H^{M N}*(\partial_{M}(H^{O P})*\partial_{N}(H_{O P})+\partial_{M}(H_{\mu}^{P})*\partial_{N}(H^{\mu}_{P})+\partial_{M}(H_{\mu \nu})*\partial_{N}(H^{\mu \nu})+\partial_{M}(H^{O}_{\mu})*\partial_{N}(H_{O}^{\mu}))
\begin{adjustwidth}{1em}{0cm}${}\frac{1}{8}M^{m n} \partial_{m}{M^{o p}} \partial_{n}{M_{o p}}+\frac{1}{4}M^{m n} \partial_{m}{g^{\mu \nu}} \partial_{n}{g_{\mu \nu}}+\frac{1}{8}g^{\mu \nu} \partial_{\mu}{M^{m n}} \partial_{\nu}{M_{m n}}+\frac{1}{4}g^{\mu \nu} \partial_{\mu}{g^{\rho \sigma}} \partial_{\nu}{g_{\rho \sigma}} - \frac{1}{4}g^{\mu \nu} A_{\mu}\,^{m} \partial_{\nu}{g^{\rho \sigma}} \partial_{m}{g_{\rho \sigma}} - \frac{1}{4}g^{\mu \nu} A_{\mu}\,^{m} \partial_{m}{g^{\rho \sigma}} \partial_{\nu}{g_{\rho \sigma}} - \frac{1}{4}g^{\mu \nu} \partial_{\mu}{M^{m n}} \partial^{o}{M_{m n}} A_{\nu o} - \frac{1}{4}g^{\alpha \lambda} g^{\mu \nu} g^{\rho \sigma} \partial_{\alpha}{b_{\mu \rho}} \partial_{\lambda}{b_{\nu \sigma}}+\frac{1}{4}g^{\mu \nu} A_{\mu}\,^{m} A_{\nu}\,^{n} \partial_{m}{g^{\rho \sigma}} \partial_{n}{g_{\rho \sigma}} - \frac{1}{2}g^{\mu \nu} M^{m n} M^{o p} \partial_{m}{A_{\mu o}} \partial_{n}{A_{\nu p}}+\frac{1}{8}g^{\mu \nu} \partial^{m}{M^{n o}} \partial^{p}{M_{n o}} A_{\mu m} A_{\nu p} - \frac{1}{2}g^{\mu \nu} g^{\rho \sigma} M^{m n} \partial_{\mu}{A_{\rho m}} \partial_{\nu}{A_{\sigma n}} - \frac{1}{4}g^{\mu \nu} g^{\rho \sigma} M^{m n} \partial_{m}{b_{\mu \rho}} \partial_{n}{b_{\nu \sigma}}+\frac{1}{2}g^{\alpha \lambda} g^{\mu \nu} g^{\rho \sigma} \partial_{\alpha}{b_{\mu \rho}} A_{\nu}\,^{m} \partial_{\lambda}{A_{\sigma m}}+\frac{1}{2}g^{\alpha \lambda} g^{\mu \nu} g^{\rho \sigma} \partial_{\alpha}{b_{\mu \rho}} \partial^{m}{b_{\nu \sigma}} A_{\lambda m}+g^{\mu \nu} g^{\rho \sigma} M^{m n} A_{\mu}\,^{o} \partial_{\nu}{A_{\rho m}} \partial_{o}{A_{\sigma n}}+\frac{1}{2}g^{\mu \nu} g^{\rho \sigma} M^{m n} \partial_{m}{b_{\mu \rho}} A_{\nu}\,^{o} \partial_{n}{A_{\sigma o}} - \frac{1}{8}g^{\alpha \lambda} g^{\mu \nu} g^{\rho \sigma} A_{\alpha}\,^{m} A_{\lambda}\,^{n} \partial_{\mu}{A_{\rho m}} \partial_{\nu}{A_{\sigma n}}+\frac{1}{8}g^{\alpha \lambda} g^{\mu \nu} g^{\rho \sigma} A_{\alpha}\,^{m} A_{\mu}\,^{n} \partial_{\rho}{A_{\lambda n}} \partial_{\sigma}{A_{\nu m}}%
 - \frac{1}{2}g^{\alpha \lambda} g^{\mu \nu} g^{\rho \sigma} \partial^{m}{b_{\alpha \mu}} A_{\lambda}\,^{n} A_{\rho m} \partial_{\sigma}{A_{\nu n}} - \frac{1}{4}g^{\alpha \lambda} g^{\mu \nu} g^{\rho \sigma} \partial^{m}{b_{\alpha \mu}} \partial^{n}{b_{\lambda \nu}} A_{\rho m} A_{\sigma n} - \frac{1}{2}g^{\alpha \lambda} g^{\mu \nu} g^{\rho \sigma} \partial_{\alpha}{b_{\mu \rho}} A_{\lambda}\,^{m} A_{\nu}\,^{n} \partial_{m}{A_{\sigma n}} - \frac{1}{2}g^{\mu \nu} g^{\rho \sigma} M^{m n} A_{\mu}\,^{o} A_{\nu}\,^{p} \partial_{o}{A_{\rho m}} \partial_{p}{A_{\sigma n}} - \frac{1}{8}g^{\mu \nu} g^{\rho \sigma} M^{m n} A_{\mu}\,^{o} A_{\nu}\,^{p} \partial_{m}{A_{\rho o}} \partial_{n}{A_{\sigma p}}+\frac{1}{8}g^{\mu \nu} g^{\rho \sigma} M^{m n} A_{\mu}\,^{o} A_{\rho}\,^{p} \partial_{m}{A_{\nu p}} \partial_{n}{A_{\sigma o}}+\frac{1}{4}g^{\alpha \lambda} g^{\mu \nu} g^{\rho \sigma} A_{\alpha}\,^{m} A_{\lambda}\,^{n} A_{\mu}\,^{o} \partial_{\nu}{A_{\rho m}} \partial_{o}{A_{\sigma n}} - \frac{1}{4}g^{\alpha \lambda} g^{\mu \nu} g^{\rho \sigma} A_{\alpha}\,^{m} A_{\mu}\,^{n} A_{\rho}\,^{o} \partial_{\lambda}{A_{\nu o}} \partial_{m}{A_{\sigma n}}+\frac{1}{2}g^{\alpha \lambda} g^{\mu \nu} g^{\rho \sigma} \partial^{m}{b_{\alpha \mu}} A_{\lambda}\,^{n} A_{\rho m} A_{\sigma}\,^{o} \partial_{o}{A_{\nu n}} - \frac{1}{8}g^{\alpha \lambda} g^{\mu \nu} g^{\rho \sigma} A_{\alpha}\,^{m} A_{\lambda}\,^{n} A_{\mu}\,^{o} A_{\nu}\,^{p} \partial_{m}{A_{\rho o}} \partial_{n}{A_{\sigma p}}+\frac{1}{8}g^{\alpha \lambda} g^{\mu \nu} g^{\rho \sigma} A_{\alpha}\,^{m} A_{\lambda}\,^{n} A_{\mu}\,^{o} A_{\rho}\,^{p} \partial_{m}{A_{\nu p}} \partial_{n}{A_{\sigma o}}$\\\end{adjustwidth}
M: De aqui podemos obtener todos los terminos con M. Existen algunos sin A ni b, que contribuian al potencial escalar y una parte del modelos sigma de M,
luego, existen terminos lineales en M ques contribuira
a el termino cinetico de los campos de gauge mientras que los de orden cuadratico apareceran nl el modelo sigma de M.
 Un analisis sencillo muestra que todos
estos terminos son utilies y pasamos ahora a analizar todo lo que qued, es decir, M=0.a
\begin{python}
substitute(_, $M_{m n} -> 0$)
substitute(_, $M^{m n} -> 0$)
factor_out(_, $ g^{\alpha \lambda}$);
\end{python}
\begin{adjustwidth}{1em}{0cm}${}\frac{1}{4}g^{\mu \nu} \partial_{\mu}{g^{\rho \sigma}} \partial_{\nu}{g_{\rho \sigma}}+g^{\mu \nu} \brwrap{(}{ - \frac{1}{4}A_{\mu}\,^{m} \partial_{\nu}{g^{\rho \sigma}} \partial_{m}{g_{\rho \sigma}} - \frac{1}{4}A_{\mu}\,^{m} \partial_{m}{g^{\rho \sigma}} \partial_{\nu}{g_{\rho \sigma}}+\frac{1}{4}A_{\mu}\,^{m} A_{\nu}\,^{n} \partial_{m}{g^{\rho \sigma}} \partial_{n}{g_{\rho \sigma}}}{)} - \frac{1}{4}g^{\alpha \lambda} g^{\mu \nu} g^{\rho \sigma} \partial_{\alpha}{b_{\mu \rho}} \partial_{\lambda}{b_{\nu \sigma}}+g^{\alpha \lambda} g^{\mu \nu} g^{\rho \sigma} \brwrap{(}{\frac{1}{2}\partial_{\alpha}{b_{\mu \rho}} A_{\nu}\,^{m} \partial_{\lambda}{A_{\sigma m}}+\frac{1}{2}\partial_{\alpha}{b_{\mu \rho}} \partial^{m}{b_{\nu \sigma}} A_{\lambda m} - \frac{1}{8}A_{\alpha}\,^{m} A_{\lambda}\,^{n} \partial_{\mu}{A_{\rho m}} \partial_{\nu}{A_{\sigma n}}+\frac{1}{8}A_{\alpha}\,^{m} A_{\mu}\,^{n} \partial_{\rho}{A_{\lambda n}} \partial_{\sigma}{A_{\nu m}} - \frac{1}{2}\partial^{m}{b_{\alpha \mu}} A_{\lambda}\,^{n} A_{\rho m} \partial_{\sigma}{A_{\nu n}} - \frac{1}{4}\partial^{m}{b_{\alpha \mu}} \partial^{n}{b_{\lambda \nu}} A_{\rho m} A_{\sigma n} - \frac{1}{2}\partial_{\alpha}{b_{\mu \rho}} A_{\lambda}\,^{m} A_{\nu}\,^{n} \partial_{m}{A_{\sigma n}}+\frac{1}{4}A_{\alpha}\,^{m} A_{\lambda}\,^{n} A_{\mu}\,^{o} \partial_{\nu}{A_{\rho m}} \partial_{o}{A_{\sigma n}} - \frac{1}{4}A_{\alpha}\,^{m} A_{\mu}\,^{n} A_{\rho}\,^{o} \partial_{\lambda}{A_{\nu o}} \partial_{m}{A_{\sigma n}}+\frac{1}{2}\partial^{m}{b_{\alpha \mu}} A_{\lambda}\,^{n} A_{\rho m} A_{\sigma}\,^{o} \partial_{o}{A_{\nu n}} - \frac{1}{8}A_{\alpha}\,^{m} A_{\lambda}\,^{n} A_{\mu}\,^{o} A_{\nu}\,^{p} \partial_{m}{A_{\rho o}} \partial_{n}{A_{\sigma p}}+\frac{1}{8}A_{\alpha}\,^{m} A_{\lambda}\,^{n} A_{\mu}\,^{o} A_{\rho}\,^{p} \partial_{m}{A_{\nu p}} \partial_{n}{A_{\sigma o}}}{)}$\\\end{adjustwidth}
Donde podemos identificar 3 tipos de terminos. Los primeros 4 corresponde al escalar de ricci covariante. 
Por ultimo, los terminos con 3 metricas corresponden a los terminos de H cuadrado. De esta forma, quedan todos los terminos analizados!
Parte 3: Pasemos ahora al ultimo termino del lagrangiano de DFT
\begin{python}
LDFT_nodilaton2:= - \frac{1}{2} ( H^{M N} \partial_{M}{ H^{O P} } \partial_{O}{ H_{N P} } + H^{M}_{\nu} \partial_{M}{ H^{O P} } \partial_{O}{ H^{\nu}_{P} } 
	  + H^{M}_{\nu} \partial_{M}{ H^{O}_{\rho} } \partial_{O}{ H^{\nu \rho} } + H^{M N} \partial_{M}{ H^{O}_{\rho} } \partial_{O}{ H_{N}^{\rho} } );
split_index(_, $M, \mu, m$,repeat=True)
converge(LDFT_nodilaton2): 
	distribute(_) 
	product_rule(_)
	sort_product(_) 
	canonicalise(_)
substitute(_,H11)
substitute(_,H12)
substitute(_,H21)
substitute(_,H13)
substitute(_,H22)
substitute(_,H23)
substitute(_,H33)
rename_dummies(_)
substitute(_,C)
for i in range(2):
	distribute(_) 
	product_rule(_)
for i in range(2):
	sort_product(_) 
	canonicalise(_)
	rename_dummies(_)
canonicalise(_)
factor_out(_,$g^{\mu \nu}$);
\end{python}
\begin{adjustwidth}{1em}{0cm}${} - \frac{1}{2}H^{M N} \partial_{M}{H^{O P}} \partial_{O}{H_{N P}} - \frac{1}{2}H^{M}\,_{\nu} \partial_{M}{H^{O P}} \partial_{O}{H^{\nu}\,_{P}} - \frac{1}{2}H^{M}\,_{\nu} \partial_{M}{H^{O}\,_{\rho}} \partial_{O}{H^{\nu \rho}} - \frac{1}{2}H^{M N} \partial_{M}{H^{O}\,_{\rho}} \partial_{O}{H_{N}\,^{\rho}}$\\\end{adjustwidth}
 -  1/2 H^{M N}*\partial_{M}(H^{O P})*\partial_{O}(H_{N P}) -  1/2 H^{M}_{\nu}*\partial_{M}(H^{O P})*\partial_{O}(H^{\nu}_{P}) -  1/2 H^{M}_{\nu}*\partial_{M}(H^{O}_{\rho})*\partial_{O}(H^{\nu \rho}) -  1/2 H^{M N}*\partial_{M}(H^{O}_{\rho})*\partial_{O}(H_{N}^{\rho})
\begin{adjustwidth}{1em}{0cm}${} - \frac{1}{2}M^{m n} M_{m}\,^{o} \partial_{\mu}{A_{\nu n}} \partial_{o}{g^{\mu \nu}}+\frac{1}{2}M^{m n} M_{m}\,^{o} A_{\mu}\,^{p} \partial_{p}{A_{\nu n}} \partial_{o}{g^{\mu \nu}} - \frac{1}{2}M^{m n} \partial_{m}{M^{o p}} \partial_{o}{M_{n p}}+g^{\mu \nu} \brwrap{(}{ - \frac{1}{2}\partial_{\mu}{g^{\rho \sigma}} \partial_{\rho}{g_{\nu \sigma}} - \frac{1}{2}g^{\alpha \lambda} g^{\rho \sigma} \partial_{\alpha}{b_{\mu \rho}} A_{\nu}\,^{m} \partial_{\sigma}{A_{\lambda m}}+\frac{1}{2}A_{\rho}\,^{m} \partial_{\mu}{g^{\rho \sigma}} \partial_{m}{g_{\nu \sigma}} - \frac{1}{2}M^{m n} \partial_{\mu}{M_{m}\,^{o}} \partial_{o}{A_{\nu n}}+\frac{1}{2}A_{\mu}\,^{m} \partial_{m}{g^{\rho \sigma}} \partial_{\rho}{g_{\nu \sigma}} - \frac{1}{2}A_{\mu}\,^{m} A_{\rho}\,^{n} \partial_{m}{g^{\rho \sigma}} \partial_{n}{g_{\nu \sigma}}+\frac{1}{2}M^{m n} \partial^{o}{M_{m}\,^{p}} A_{\mu o} \partial_{p}{A_{\nu n}}+\frac{1}{2}M^{m n} \partial_{\mu}{M_{m}\,^{o}} \partial_{n}{A_{\nu o}}+\frac{1}{2}M^{m n} M_{m}\,^{o} \partial_{n}{A_{\mu}\,^{p}} \partial_{p}{A_{\nu o}} - \frac{1}{2}M^{m n} \partial^{o}{M_{m}\,^{p}} A_{\mu o} \partial_{n}{A_{\nu p}}+\frac{1}{2}M^{m n} M^{o p} \partial_{m}{A_{\mu o}} \partial_{p}{A_{\nu n}}}{)}+g^{\alpha \lambda} g^{\mu \nu} g^{\rho \sigma} \brwrap{(}{\frac{1}{8}A_{\alpha}\,^{m} A_{\lambda}\,^{n} \partial_{\mu}{A_{\rho m}} \partial_{\sigma}{A_{\nu n}} - \frac{1}{4}A_{\alpha}\,^{m} A_{\mu}\,^{n} \partial_{\lambda}{A_{\rho n}} \partial_{\sigma}{A_{\nu m}}+\frac{1}{2}\partial^{m}{b_{\alpha \mu}} A_{\lambda}\,^{n} A_{\rho m} \partial_{\nu}{A_{\sigma n}} - \frac{1}{4}A_{\alpha}\,^{m} A_{\lambda}\,^{n} A_{\mu}\,^{o} \partial_{\rho}{A_{\nu m}} \partial_{o}{A_{\sigma n}}+\frac{1}{4}A_{\alpha}\,^{m} A_{\mu}\,^{n} A_{\rho}\,^{o} \partial_{\lambda}{A_{\nu o}} \partial_{n}{A_{\sigma m}} - \frac{1}{2}\partial_{\alpha}{b_{\mu \rho}} A_{\nu}\,^{m} A_{\sigma}\,^{n} \partial_{m}{A_{\lambda n}}+\frac{1}{4}A_{\alpha}\,^{m} A_{\lambda}\,^{n} A_{\mu}\,^{o} \partial_{\rho}{A_{\nu m}} \partial_{n}{A_{\sigma o}}+\frac{1}{2}\partial^{m}{b_{\alpha \mu}} A_{\lambda}\,^{n} A_{\nu}\,^{o} A_{\rho m} \partial_{n}{A_{\sigma o}}+\frac{1}{8}A_{\alpha}\,^{m} A_{\lambda}\,^{n} A_{\mu}\,^{o} A_{\rho}\,^{p} \partial_{o}{A_{\sigma m}} \partial_{p}{A_{\nu n}}+\frac{1}{2}\partial_{\alpha}{b_{\mu \rho}} \partial_{\nu}{b_{\lambda \sigma}} - \frac{1}{2}\partial_{\alpha}{b_{\mu \rho}} A_{\lambda}\,^{m} \partial_{\nu}{A_{\sigma m}}+\frac{1}{8}A_{\alpha}\,^{m} A_{\mu}\,^{n} \partial_{\lambda}{A_{\rho n}} \partial_{\nu}{A_{\sigma m}}+\partial_{\alpha}{b_{\mu \rho}} \partial^{m}{b_{\lambda \nu}} A_{\sigma m}+\frac{1}{2}\partial^{m}{b_{\alpha \mu}} A_{\rho m} A_{\sigma}\,^{n} \partial_{\lambda}{A_{\nu n}} - \frac{1}{4}A_{\alpha}\,^{m} A_{\lambda}\,^{n} A_{\mu}\,^{o} \partial_{\nu}{A_{\rho m}} \partial_{n}{A_{\sigma o}}+\frac{1}{2}\partial_{\alpha}{b_{\mu \rho}} A_{\lambda}\,^{m} A_{\nu}\,^{n} \partial_{n}{A_{\sigma m}}+\frac{1}{2}\partial^{m}{b_{\alpha \mu}} \partial^{n}{b_{\lambda \rho}} A_{\nu n} A_{\sigma m} - \frac{1}{2}\partial^{m}{b_{\alpha \mu}} A_{\lambda}\,^{n} A_{\rho m} A_{\sigma}\,^{o} \partial_{n}{A_{\nu o}} - \frac{1}{4}A_{\alpha}\,^{m} A_{\lambda}\,^{n} A_{\mu}\,^{o} A_{\rho}\,^{p} \partial_{m}{A_{\nu p}} \partial_{o}{A_{\sigma n}}%
+\frac{1}{8}A_{\alpha}\,^{m} A_{\lambda}\,^{n} A_{\mu}\,^{o} A_{\nu}\,^{p} \partial_{m}{A_{\rho o}} \partial_{p}{A_{\sigma n}}}{)}+g^{\mu \nu} g^{\rho \sigma} \brwrap{(}{\frac{1}{2}M^{m n} \partial_{\mu}{A_{\rho m}} \partial_{\sigma}{A_{\nu n}}+\frac{1}{2}\partial_{\mu}{A_{\rho}\,^{m}} \partial_{m}{g_{\nu \sigma}}-M^{m n} A_{\mu}\,^{o} \partial_{\rho}{A_{\nu m}} \partial_{o}{A_{\sigma n}} - \frac{1}{2}A_{\mu}\,^{m} \partial_{m}{A_{\rho}\,^{n}} \partial_{n}{g_{\nu \sigma}}+\frac{1}{2}M^{m n} A_{\mu}\,^{o} A_{\rho}\,^{p} \partial_{o}{A_{\sigma m}} \partial_{p}{A_{\nu n}}+\frac{1}{2}M^{m n} A_{\mu}\,^{o} \partial_{\rho}{A_{\nu m}} \partial_{n}{A_{\sigma o}} - \frac{1}{2}M^{m n} A_{\mu}\,^{o} A_{\rho}\,^{p} \partial_{m}{A_{\nu p}} \partial_{o}{A_{\sigma n}}+M^{m n} \partial_{m}{b_{\mu \rho}} \partial_{\nu}{A_{\sigma n}} - \frac{1}{2}M^{m n} A_{\mu}\,^{o} \partial_{\nu}{A_{\rho m}} \partial_{n}{A_{\sigma o}}-M^{m n} \partial_{m}{b_{\mu \rho}} A_{\nu}\,^{o} \partial_{o}{A_{\sigma n}}+\frac{1}{2}M^{m n} A_{\mu}\,^{o} A_{\nu}\,^{p} \partial_{m}{A_{\rho o}} \partial_{p}{A_{\sigma n}}}{)}$\\\end{adjustwidth}
 -  1/2 M^{m n}*M_{m}^{o}*\partial_{\mu}(A_{\nu n})*\partial_{o}(g^{\mu \nu})+ 1/2 M^{m n}*M_{m}^{o}*A_{\mu}^{p}*\partial_{p}(A_{\nu n})*\partial_{o}(g^{\mu \nu}) -  1/2 M^{m n}*\partial_{m}(M^{o p})*\partial_{o}(M_{n p})+g^{\mu \nu}*( -  1/2 \partial_{\mu}(g^{\rho \sigma})*\partial_{\rho}(g_{\nu \sigma}) -  1/2 g^{\alpha \lambda}*g^{\rho \sigma}*\partial_{\alpha}(b_{\mu \rho})*A_{\nu}^{m}*\partial_{\sigma}(A_{\lambda m})+ 1/2 A_{\rho}^{m}*\partial_{\mu}(g^{\rho \sigma})*\partial_{m}(g_{\nu \sigma}) -  1/2 M^{m n}*\partial_{\mu}(M_{m}^{o})*\partial_{o}(A_{\nu n})+ 1/2 A_{\mu}^{m}*\partial_{m}(g^{\rho \sigma})*\partial_{\rho}(g_{\nu \sigma}) -  1/2 A_{\mu}^{m}*A_{\rho}^{n}*\partial_{m}(g^{\rho \sigma})*\partial_{n}(g_{\nu \sigma})+ 1/2 M^{m n}*\partial^{o}(M_{m}^{p})*A_{\mu o}*\partial_{p}(A_{\nu n})+ 1/2 M^{m n}*\partial_{\mu}(M_{m}^{o})*\partial_{n}(A_{\nu o})+ 1/2 M^{m n}*M_{m}^{o}*\partial_{n}(A_{\mu}^{p})*\partial_{p}(A_{\nu o}) -  1/2 M^{m n}*\partial^{o}(M_{m}^{p})*A_{\mu o}*\partial_{n}(A_{\nu p})+ 1/2 M^{m n}*M^{o p}*\partial_{m}(A_{\mu o})*\partial_{p}(A_{\nu n}))+g^{\alpha \lambda}*g^{\mu \nu}*g^{\rho \sigma}*( 1/8 A_{\alpha}^{m}*A_{\lambda}^{n}*\partial_{\mu}(A_{\rho m})*\partial_{\sigma}(A_{\nu n}) -  1/4 A_{\alpha}^{m}*A_{\mu}^{n}*\partial_{\lambda}(A_{\rho n})*\partial_{\sigma}(A_{\nu m})+ 1/2 \partial^{m}(b_{\alpha \mu})*A_{\lambda}^{n}*A_{\rho m}*\partial_{\nu}(A_{\sigma n}) -  1/4 A_{\alpha}^{m}*A_{\lambda}^{n}*A_{\mu}^{o}*\partial_{\rho}(A_{\nu m})*\partial_{o}(A_{\sigma n})+ 1/4 A_{\alpha}^{m}*A_{\mu}^{n}*A_{\rho}^{o}*\partial_{\lambda}(A_{\nu o})*\partial_{n}(A_{\sigma m}) -  1/2 \partial_{\alpha}(b_{\mu \rho})*A_{\nu}^{m}*A_{\sigma}^{n}*\partial_{m}(A_{\lambda n})+ 1/4 A_{\alpha}^{m}*A_{\lambda}^{n}*A_{\mu}^{o}*\partial_{\rho}(A_{\nu m})*\partial_{n}(A_{\sigma o})+ 1/2 \partial^{m}(b_{\alpha \mu})*A_{\lambda}^{n}*A_{\nu}^{o}*A_{\rho m}*\partial_{n}(A_{\sigma o})+ 1/8 A_{\alpha}^{m}*A_{\lambda}^{n}*A_{\mu}^{o}*A_{\rho}^{p}*\partial_{o}(A_{\sigma m})*\partial_{p}(A_{\nu n})+ 1/2 \partial_{\alpha}(b_{\mu \rho})*\partial_{\nu}(b_{\lambda \sigma}) -  1/2 \partial_{\alpha}(b_{\mu \rho})*A_{\lambda}^{m}*\partial_{\nu}(A_{\sigma m})+ 1/8 A_{\alpha}^{m}*A_{\mu}^{n}*\partial_{\lambda}(A_{\rho n})*\partial_{\nu}(A_{\sigma m})+\partial_{\alpha}(b_{\mu \rho})*\partial^{m}(b_{\lambda \nu})*A_{\sigma m}+ 1/2 \partial^{m}(b_{\alpha \mu})*A_{\rho m}*A_{\sigma}^{n}*\partial_{\lambda}(A_{\nu n}) -  1/4 A_{\alpha}^{m}*A_{\lambda}^{n}*A_{\mu}^{o}*\partial_{\nu}(A_{\rho m})*\partial_{n}(A_{\sigma o})+ 1/2 \partial_{\alpha}(b_{\mu \rho})*A_{\lambda}^{m}*A_{\nu}^{n}*\partial_{n}(A_{\sigma m})+ 1/2 \partial^{m}(b_{\alpha \mu})*\partial^{n}(b_{\lambda \rho})*A_{\nu n}*A_{\sigma m} -  1/2 \partial^{m}(b_{\alpha \mu})*A_{\lambda}^{n}*A_{\rho m}*A_{\sigma}^{o}*\partial_{n}(A_{\nu o}) -  1/4 A_{\alpha}^{m}*A_{\lambda}^{n}*A_{\mu}^{o}*A_{\rho}^{p}*\partial_{m}(A_{\nu p})*\partial_{o}(A_{\sigma n})+ 1/8 A_{\alpha}^{m}*A_{\lambda}^{n}*A_{\mu}^{o}*A_{\nu}^{p}*\partial_{m}(A_{\rho o})*\partial_{p}(A_{\sigma n}))+g^{\mu \nu}*g^{\rho \sigma}*( 1/2 M^{m n}*\partial_{\mu}(A_{\rho m})*\partial_{\sigma}(A_{\nu n})+ 1/2 \partial_{\mu}(A_{\rho}^{m})*\partial_{m}(g_{\nu \sigma})-M^{m n}*A_{\mu}^{o}*\partial_{\rho}(A_{\nu m})*\partial_{o}(A_{\sigma n}) -  1/2 A_{\mu}^{m}*\partial_{m}(A_{\rho}^{n})*\partial_{n}(g_{\nu \sigma})+ 1/2 M^{m n}*A_{\mu}^{o}*A_{\rho}^{p}*\partial_{o}(A_{\sigma m})*\partial_{p}(A_{\nu n})+ 1/2 M^{m n}*A_{\mu}^{o}*\partial_{\rho}(A_{\nu m})*\partial_{n}(A_{\sigma o}) -  1/2 M^{m n}*A_{\mu}^{o}*A_{\rho}^{p}*\partial_{m}(A_{\nu p})*\partial_{o}(A_{\sigma n})+M^{m n}*\partial_{m}(b_{\mu \rho})*\partial_{\nu}(A_{\sigma n}) -  1/2 M^{m n}*A_{\mu}^{o}*\partial_{\nu}(A_{\rho m})*\partial_{n}(A_{\sigma o})-M^{m n}*\partial_{m}(b_{\mu \rho})*A_{\nu}^{o}*\partial_{o}(A_{\sigma n})+ 1/2 M^{m n}*A_{\mu}^{o}*A_{\nu}^{p}*\partial_{m}(A_{\rho o})*\partial_{p}(A_{\sigma n}))
En primer lugar, uno puede corroborar que los 21 terminos con 3 metricas corresponden a lo que faltaba para completa el modelo de la 2-forma.
Para seguir con el analisis mas prolijo tiramos estos terminos.
\begin{python}
substitute(_, $g^{\alpha \lambda} g^{\mu \nu} g^{\rho \sigma} -> 0$);
\end{python}
\begin{adjustwidth}{1em}{0cm}${} - \frac{1}{2}M^{m n} M_{m}\,^{o} \partial_{\mu}{A_{\nu n}} \partial_{o}{g^{\mu \nu}}+\frac{1}{2}M^{m n} M_{m}\,^{o} A_{\mu}\,^{p} \partial_{p}{A_{\nu n}} \partial_{o}{g^{\mu \nu}} - \frac{1}{2}M^{m n} \partial_{m}{M^{o p}} \partial_{o}{M_{n p}}+g^{\mu \nu} \brwrap{(}{ - \frac{1}{2}\partial_{\mu}{g^{\rho \sigma}} \partial_{\rho}{g_{\nu \sigma}} - \frac{1}{2}g^{\alpha \lambda} g^{\rho \sigma} \partial_{\alpha}{b_{\mu \rho}} A_{\nu}\,^{m} \partial_{\sigma}{A_{\lambda m}}+\frac{1}{2}A_{\rho}\,^{m} \partial_{\mu}{g^{\rho \sigma}} \partial_{m}{g_{\nu \sigma}} - \frac{1}{2}M^{m n} \partial_{\mu}{M_{m}\,^{o}} \partial_{o}{A_{\nu n}}+\frac{1}{2}A_{\mu}\,^{m} \partial_{m}{g^{\rho \sigma}} \partial_{\rho}{g_{\nu \sigma}} - \frac{1}{2}A_{\mu}\,^{m} A_{\rho}\,^{n} \partial_{m}{g^{\rho \sigma}} \partial_{n}{g_{\nu \sigma}}+\frac{1}{2}M^{m n} \partial^{o}{M_{m}\,^{p}} A_{\mu o} \partial_{p}{A_{\nu n}}+\frac{1}{2}M^{m n} \partial_{\mu}{M_{m}\,^{o}} \partial_{n}{A_{\nu o}}+\frac{1}{2}M^{m n} M_{m}\,^{o} \partial_{n}{A_{\mu}\,^{p}} \partial_{p}{A_{\nu o}} - \frac{1}{2}M^{m n} \partial^{o}{M_{m}\,^{p}} A_{\mu o} \partial_{n}{A_{\nu p}}+\frac{1}{2}M^{m n} M^{o p} \partial_{m}{A_{\mu o}} \partial_{p}{A_{\nu n}}}{)}+g^{\mu \nu} g^{\rho \sigma} \brwrap{(}{\frac{1}{2}M^{m n} \partial_{\mu}{A_{\rho m}} \partial_{\sigma}{A_{\nu n}}+\frac{1}{2}\partial_{\mu}{A_{\rho}\,^{m}} \partial_{m}{g_{\nu \sigma}}-M^{m n} A_{\mu}\,^{o} \partial_{\rho}{A_{\nu m}} \partial_{o}{A_{\sigma n}} - \frac{1}{2}A_{\mu}\,^{m} \partial_{m}{A_{\rho}\,^{n}} \partial_{n}{g_{\nu \sigma}}+\frac{1}{2}M^{m n} A_{\mu}\,^{o} A_{\rho}\,^{p} \partial_{o}{A_{\sigma m}} \partial_{p}{A_{\nu n}}+\frac{1}{2}M^{m n} A_{\mu}\,^{o} \partial_{\rho}{A_{\nu m}} \partial_{n}{A_{\sigma o}} - \frac{1}{2}M^{m n} A_{\mu}\,^{o} A_{\rho}\,^{p} \partial_{m}{A_{\nu p}} \partial_{o}{A_{\sigma n}}+M^{m n} \partial_{m}{b_{\mu \rho}} \partial_{\nu}{A_{\sigma n}} - \frac{1}{2}M^{m n} A_{\mu}\,^{o} \partial_{\nu}{A_{\rho m}} \partial_{n}{A_{\sigma o}}-M^{m n} \partial_{m}{b_{\mu \rho}} A_{\nu}\,^{o} \partial_{o}{A_{\sigma n}}+\frac{1}{2}M^{m n} A_{\mu}\,^{o} A_{\nu}\,^{p} \partial_{m}{A_{\rho o}} \partial_{p}{A_{\sigma n}}}{)}$\\\end{adjustwidth}
 -  1/2 M^{m n}*M_{m}^{o}*\partial_{\mu}(A_{\nu n})*\partial_{o}(g^{\mu \nu})+ 1/2 M^{m n}*M_{m}^{o}*A_{\mu}^{p}*\partial_{p}(A_{\nu n})*\partial_{o}(g^{\mu \nu}) -  1/2 M^{m n}*\partial_{m}(M^{o p})*\partial_{o}(M_{n p})+g^{\mu \nu}*( -  1/2 \partial_{\mu}(g^{\rho \sigma})*\partial_{\rho}(g_{\nu \sigma}) -  1/2 g^{\alpha \lambda}*g^{\rho \sigma}*\partial_{\alpha}(b_{\mu \rho})*A_{\nu}^{m}*\partial_{\sigma}(A_{\lambda m})+ 1/2 A_{\rho}^{m}*\partial_{\mu}(g^{\rho \sigma})*\partial_{m}(g_{\nu \sigma}) -  1/2 M^{m n}*\partial_{\mu}(M_{m}^{o})*\partial_{o}(A_{\nu n})+ 1/2 A_{\mu}^{m}*\partial_{m}(g^{\rho \sigma})*\partial_{\rho}(g_{\nu \sigma}) -  1/2 A_{\mu}^{m}*A_{\rho}^{n}*\partial_{m}(g^{\rho \sigma})*\partial_{n}(g_{\nu \sigma})+ 1/2 M^{m n}*\partial^{o}(M_{m}^{p})*A_{\mu o}*\partial_{p}(A_{\nu n})+ 1/2 M^{m n}*\partial_{\mu}(M_{m}^{o})*\partial_{n}(A_{\nu o})+ 1/2 M^{m n}*M_{m}^{o}*\partial_{n}(A_{\mu}^{p})*\partial_{p}(A_{\nu o}) -  1/2 M^{m n}*\partial^{o}(M_{m}^{p})*A_{\mu o}*\partial_{n}(A_{\nu p})+ 1/2 M^{m n}*M^{o p}*\partial_{m}(A_{\mu o})*\partial_{p}(A_{\nu n}))+g^{\mu \nu}*g^{\rho \sigma}*( 1/2 M^{m n}*\partial_{\mu}(A_{\rho m})*\partial_{\sigma}(A_{\nu n})+ 1/2 \partial_{\mu}(A_{\rho}^{m})*\partial_{m}(g_{\nu \sigma})-M^{m n}*A_{\mu}^{o}*\partial_{\rho}(A_{\nu m})*\partial_{o}(A_{\sigma n}) -  1/2 A_{\mu}^{m}*\partial_{m}(A_{\rho}^{n})*\partial_{n}(g_{\nu \sigma})+ 1/2 M^{m n}*A_{\mu}^{o}*A_{\rho}^{p}*\partial_{o}(A_{\sigma m})*\partial_{p}(A_{\nu n})+ 1/2 M^{m n}*A_{\mu}^{o}*\partial_{\rho}(A_{\nu m})*\partial_{n}(A_{\sigma o}) -  1/2 M^{m n}*A_{\mu}^{o}*A_{\rho}^{p}*\partial_{m}(A_{\nu p})*\partial_{o}(A_{\sigma n})+M^{m n}*\partial_{m}(b_{\mu \rho})*\partial_{\nu}(A_{\sigma n}) -  1/2 M^{m n}*A_{\mu}^{o}*\partial_{\nu}(A_{\rho m})*\partial_{n}(A_{\sigma o})-M^{m n}*\partial_{m}(b_{\mu \rho})*A_{\nu}^{o}*\partial_{o}(A_{\sigma n})+ 1/2 M^{m n}*A_{\mu}^{o}*A_{\nu}^{p}*\partial_{m}(A_{\rho o})*\partial_{p}(A_{\sigma n}))
De aqui vemos que los9 terminos con 2 metricas y lineales en M completan el MFF. Luego los terminos con M no contraidas se suman a DMDM faltando solo un termino.
A su vez existen 4 terminos que terminan de completar el ricci covariante y agrupando todo lo que falta vemos que sobran solo 5 terminos.
Luego de un poco de calculo estos 5 terminos se resumen a 3.quu
al final del dia vemos que estos 3 terminos se unen a los 3 que quedaron colgados del primer analisis para completar la accion efectiva y sin terminos extra. The END
\begin{python}
\end{python}
\end{document}
